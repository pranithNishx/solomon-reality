(()=>{var e={};e.id=965,e.ids=[965],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},33277:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),s(50727),s(9457),s(25780),s(7629),s(12523);var r=s(23191),a=s(88716),i=s(37922),n=s.n(i),o=s(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d=["",{children:["admin",{children:["leads",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,50727)),"C:\\Users\\nishu\\OneDrive\\Desktop\\solomon-reality\\frontend\\src\\app\\admin\\leads\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,9457)),"C:\\Users\\nishu\\OneDrive\\Desktop\\solomon-reality\\frontend\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,25780)),"C:\\Users\\nishu\\OneDrive\\Desktop\\solomon-reality\\frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,7629)),"C:\\Users\\nishu\\OneDrive\\Desktop\\solomon-reality\\frontend\\src\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,12523)),"C:\\Users\\nishu\\OneDrive\\Desktop\\solomon-reality\\frontend\\src\\app\\not-found.tsx"]}],c=["C:\\Users\\nishu\\OneDrive\\Desktop\\solomon-reality\\frontend\\src\\app\\admin\\leads\\page.tsx"],u="/admin/leads/page",h={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/leads/page",pathname:"/admin/leads",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},73658:(e,t,s)=>{Promise.resolve().then(s.bind(s,6674))},97297:(e,t,s)=>{Promise.resolve().then(s.bind(s,47926))},59734:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(76557).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},31540:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(76557).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},75290:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(76557).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},98091:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(76557).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},17069:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(76557).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},24061:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(76557).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},6674:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var r=s(10326);s(17577);var a=s(35047),i=s(58029),n=s(75290),o=s(30058),l=s(90434),d=s(95920),c=s(59734),u=s(5932),h=s(17069),p=s(24061),m=s(88378);function x(){let e=(0,a.usePathname)(),{user:t}=(0,i.t)(),s=[{title:"Dashboard",href:"/admin",icon:d.Z},{title:"Properties",href:"/admin/properties",icon:c.Z},{title:"Leads",href:"/admin/leads",icon:u.Z},{title:"Analytics",href:"/admin/analytics",icon:h.Z},{title:"Users",href:"/admin/users",icon:p.Z},{title:"Settings",href:"/admin/settings",icon:m.Z}];return(0,r.jsxs)("aside",{className:"w-64 bg-surface border-r border-border min-h-screen sticky top-0",children:[(0,r.jsxs)("div",{className:"p-6 border-b border-border",children:[r.jsx("h2",{className:"text-xl font-display font-bold text-accent-primary",children:"Admin Panel"}),r.jsx("p",{className:"text-text-secondary text-sm mt-1",children:t?.name||"Admin"})]}),r.jsx("nav",{className:"p-4 space-y-2",children:s.map(t=>{let s=t.icon,a=e===t.href||e?.startsWith(t.href+"/");return r.jsx(l.default,{href:t.href,children:(0,r.jsxs)(o.E.div,{whileHover:{x:4},whileTap:{scale:.98},className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${a?"bg-accent-primary/10 text-accent-primary border-l-4 border-accent-primary":"text-text-secondary hover:bg-surface-muted hover:text-text-primary"}`,children:[r.jsx(s,{size:20}),r.jsx("span",{className:"font-medium",children:t.title})]})},t.href)})})]})}var y=s(16681);function b({children:e}){(0,a.useRouter)();let{isAuthenticated:t,user:s}=(0,i.t)();return t&&s?.role==="admin"?(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-soft flex",children:[r.jsx(x,{}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col",children:[r.jsx(y.w,{}),r.jsx(o.E.main,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"flex-1 p-6",children:e})]})]}):r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-soft",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx(n.Z,{className:"animate-spin text-accent-primary mx-auto mb-4",size:32}),r.jsx("p",{className:"text-text-secondary",children:"Redirecting to login..."})]})})}},47926:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var r=s(10326),a=s(17577),i=s(35047),n=s(90434),o=s(44976),l=s(20108),d=s(10119),c=s(18069),u=s(58029),h=s(75290),p=s(31540),m=s(98091),x=s(40381),y=s(30058);function b(){(0,i.useRouter)();let{isAuthenticated:e,user:t}=(0,u.t)(),s=(0,o.NL)(),[b,f]=(0,a.useState)(1),[v,g]=(0,a.useState)(""),[j,N]=(0,a.useState)(""),{data:k,isLoading:w}=(0,l.a)({queryKey:["admin-leads",b,v,j],queryFn:async()=>(await c.fn.getAll({page:b,limit:20,status:v||void 0,search:j||void 0})).data,enabled:e&&t?.role==="admin"}),P=(0,d.D)({mutationFn:({id:e,status:t})=>c.fn.updateStatus(e,t),onSuccess:()=>{s.invalidateQueries({queryKey:["admin-leads"]}),x.ZP.success("Lead status updated successfully")},onError:e=>{x.ZP.error(e.response?.data?.error||"Failed to update lead status")}}),C=(0,d.D)({mutationFn:async()=>(await c.fn.exportCSV()).data,onSuccess:e=>{let t=window.URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download=`leads-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(t),document.body.removeChild(s),x.ZP.success("Leads exported successfully")},onError:e=>{x.ZP.error(e.response?.data?.error||"Failed to export leads")}}),M=(0,d.D)({mutationFn:e=>c.fn.delete(e),onSuccess:()=>{s.invalidateQueries({queryKey:["admin-leads"]}),x.ZP.success("Lead deleted successfully")},onError:e=>{x.ZP.error(e.response?.data?.error||"Failed to delete lead")}});if(!e||t?.role!=="admin"||w)return r.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:r.jsx(h.Z,{className:"animate-spin text-accent-primary",size:40})});let q=k?.leads||[],Z=k?.pagination,O={Pending:"bg-warning/20 text-warning border-warning/30",Contacted:"bg-accent-secondary/20 text-accent-secondary border-accent-secondary/30",Converted:"bg-success/20 text-success border-success/30",Lost:"bg-error/20 text-error border-error/30"};return r.jsx("div",{className:"min-h-screen bg-background py-12 px-4",children:(0,r.jsxs)("div",{className:"max-w-[1280px] mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsxs)("h1",{className:"text-4xl font-display font-bold",children:[r.jsx("span",{className:"text-gradient",children:"Manage"})," ",r.jsx("span",{className:"text-text-primary",children:"Leads"})]}),(0,r.jsxs)("button",{onClick:()=>C.mutate(),className:"btn-secondary flex items-center gap-2",disabled:C.isPending,children:[r.jsx(p.Z,{size:20}),"Export CSV"]})]}),r.jsx("div",{className:"card-luxury mb-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Search"}),r.jsx("input",{type:"text",value:j,onChange:e=>N(e.target.value),placeholder:"Search by name, email, phone...",className:"input-elegant w-full"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Status"}),(0,r.jsxs)("select",{value:v,onChange:e=>g(e.target.value),className:"input-elegant w-full",children:[r.jsx("option",{value:"",children:"All Statuses"}),r.jsx("option",{value:"Pending",children:"Pending"}),r.jsx("option",{value:"Contacted",children:"Contacted"}),r.jsx("option",{value:"Converted",children:"Converted"}),r.jsx("option",{value:"Lost",children:"Lost"})]})]})]})}),(0,r.jsxs)("div",{className:"card-luxury overflow-x-auto",children:[r.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:(0,r.jsxs)("table",{className:"w-full min-w-[800px]",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-border",children:[r.jsx("th",{className:"text-left p-4 text-accent-primary font-semibold",children:"Name"}),r.jsx("th",{className:"text-left p-4 text-accent-primary font-semibold",children:"Email"}),r.jsx("th",{className:"text-left p-4 text-accent-primary font-semibold",children:"Phone"}),r.jsx("th",{className:"text-left p-4 text-accent-primary font-semibold",children:"Property"}),r.jsx("th",{className:"text-left p-4 text-accent-primary font-semibold",children:"Message"}),r.jsx("th",{className:"text-left p-4 text-accent-primary font-semibold",children:"Status"}),r.jsx("th",{className:"text-left p-4 text-accent-primary font-semibold",children:"Date"}),r.jsx("th",{className:"text-left p-4 text-accent-primary font-semibold",children:"Actions"})]})}),r.jsx("tbody",{children:q.map((e,t)=>(0,r.jsxs)(y.E.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.02*t},className:"border-b border-border hover:bg-surface-muted transition-colors",children:[r.jsx("td",{className:"p-4 font-medium text-text-primary",children:e.name}),r.jsx("td",{className:"p-4",children:r.jsx("a",{href:`mailto:${e.email}`,className:"text-accent-primary hover:underline break-all",children:e.email})}),r.jsx("td",{className:"p-4",children:r.jsx("a",{href:`tel:${e.phone}`,className:"text-accent-primary hover:underline",children:e.phone})}),r.jsx("td",{className:"p-4",children:e.property_id?r.jsx(n.default,{href:`/properties/${e.property_id}`,className:"text-accent-primary hover:underline text-sm",target:"_blank",children:"View Property"}):r.jsx("span",{className:"text-text-secondary",children:"N/A"})}),r.jsx("td",{className:"p-4 max-w-xs",children:e.message?r.jsx("div",{className:"text-text-secondary text-sm line-clamp-2",children:e.message}):r.jsx("span",{className:"text-text-secondary",children:"No message"})}),r.jsx("td",{className:"p-4",children:(0,r.jsxs)("select",{value:e.status,onChange:t=>P.mutate({id:e.id,status:t.target.value}),disabled:P.isPending,className:`px-3 py-2 rounded-lg text-sm font-semibold border transition-all ${O[e.status]||"bg-surface-muted text-text-primary border-border"}`,children:[r.jsx("option",{value:"Pending",children:"Pending"}),r.jsx("option",{value:"Contacted",children:"Contacted"}),r.jsx("option",{value:"Converted",children:"Converted"}),r.jsx("option",{value:"Lost",children:"Lost"})]})}),r.jsx("td",{className:"p-4 text-text-secondary text-sm whitespace-nowrap",children:new Date(e.created_at).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}),r.jsx("td",{className:"p-4",children:r.jsx("div",{className:"flex items-center gap-3",children:r.jsx("button",{onClick:()=>{confirm(`Are you sure you want to delete the lead from ${e.name}? This action cannot be undone.`)&&M.mutate(e.id)},disabled:M.isPending,className:"text-error hover:text-error/80 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete lead",children:r.jsx(m.Z,{size:18})})})})]},e.id))})]})}),0===q.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-text-secondary text-lg",children:"No leads found"}),r.jsx("p",{className:"text-text-secondary text-sm mt-2",children:"Leads will appear here when users submit inquiries"})]})]}),Z&&Z.pages>1&&(0,r.jsxs)("div",{className:"flex justify-center items-center gap-4 mt-8",children:[r.jsx("button",{onClick:()=>f(e=>Math.max(1,e-1)),disabled:1===b,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,r.jsxs)("span",{className:"text-text-secondary",children:["Page ",b," of ",Z.pages]}),r.jsx("button",{onClick:()=>f(e=>Math.min(Z.pages,e+1)),disabled:b===Z.pages,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})}},9457:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`C:\Users\nishu\OneDrive\Desktop\solomon-reality\frontend\src\app\admin\layout.tsx#default`)},50727:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`C:\Users\nishu\OneDrive\Desktop\solomon-reality\frontend\src\app\admin\leads\page.tsx#default`)},10119:(e,t,s)=>{"use strict";s.d(t,{D:()=>c});var r=s(17577),a=s(71180),i=s(12113),n=s(64351),o=s(3341),l=class extends n.l{#e;#t=void 0;#s;#r;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,o.VS)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,o.Ym)(t.mutationKey)!==(0,o.Ym)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#a(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#a(),this.#i()}mutate(e,t){return this.#r=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#a(){let e=this.#s?.state??(0,a.R)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#i(e){i.Vr.batch(()=>{if(this.#r&&this.hasListeners()){let t=this.#t.variables,s=this.#t.context,r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#r.onSuccess?.(e.data,t,s,r),this.#r.onSettled?.(e.data,null,t,s,r)):e?.type==="error"&&(this.#r.onError?.(e.error,t,s,r),this.#r.onSettled?.(void 0,e.error,t,s,r))}this.listeners.forEach(e=>{e(this.#t)})})}},d=s(44976);function c(e,t){let s=(0,d.NL)(t),[a]=r.useState(()=>new l(s,e));r.useEffect(()=>{a.setOptions(e)},[a,e]);let n=r.useSyncExternalStore(r.useCallback(e=>a.subscribe(i.Vr.batchCalls(e)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),c=r.useCallback((e,t)=>{a.mutate(e,t).catch(o.ZT)},[a]);if(n.error&&(0,o.L3)(a.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:c,mutateAsync:n.mutate}}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[378,285],()=>s(33277));module.exports=r})();