(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{66022:function(e,t,a){Promise.resolve().then(a.bind(a,38991))},27648:function(e,t,a){"use strict";a.d(t,{default:function(){return s.a}});var n=a(72972),s=a.n(n)},38991:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var n=a(57437),s=a(99376),i=a(29501),r=a(21770),o=a(71837),l=a(1217),u=a(27648),c=a(69064);function d(){let e=(0,s.useRouter)(),{setAuth:t}=(0,l.t)(),{register:a,handleSubmit:d,formState:{errors:p}}=(0,i.cI)(),m=()=>new URLSearchParams(window.location.search).get("redirect")||null,g=(0,r.D)({mutationFn:e=>o.iJ.login(e),onSuccess:a=>{let{user:n,token:s}=a.data;t(n,s),c.ZP.success("Login successful!");let i=m();"admin"===n.role?e.push("/admin"):i?e.push(i):e.push("/")},onError:e=>{var t,a;let n=(null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.error)||e.message||"Login failed";c.ZP.error(n),console.error("Login error:",e)}});return(0,n.jsx)("div",{className:"min-h-screen bg-gradient-soft flex items-center justify-center py-12 px-4",children:(0,n.jsx)("div",{className:"w-full max-w-md",children:(0,n.jsxs)("div",{className:"card-luxury",children:[(0,n.jsxs)("h1",{className:"text-3xl font-display font-bold text-center mb-2",children:[(0,n.jsx)("span",{className:"text-gradient",children:"Welcome"})," ",(0,n.jsx)("span",{className:"text-text-primary",children:"Back"})]}),(0,n.jsx)("p",{className:"text-center text-text-secondary mb-8",children:"Login to your Covenant Realty account"}),(0,n.jsxs)("form",{onSubmit:d(e=>{g.mutate(e)}),className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Email"}),(0,n.jsx)("input",{type:"email",...a("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),className:"input-elegant w-full",placeholder:"your.email@example.com"}),p.email&&(0,n.jsx)("p",{className:"text-error text-sm mt-1",children:p.email.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Password"}),(0,n.jsx)("input",{type:"password",...a("password",{required:"Password is required"}),className:"input-elegant w-full",placeholder:"Enter your password"}),p.password&&(0,n.jsx)("p",{className:"text-error text-sm mt-1",children:p.password.message})]}),(0,n.jsx)("button",{type:"submit",disabled:g.isPending,className:"btn-primary w-full",children:g.isPending?"Logging in...":"Login"})]}),(0,n.jsx)("div",{className:"mt-6 text-center",children:(0,n.jsxs)("p",{className:"text-text-secondary text-sm",children:["Don't have an account?"," ",(0,n.jsx)(u.default,{href:"/register",className:"text-accent-primary hover:text-accent-primary-hover hover:underline font-semibold transition-colors",children:"Register"})]})})]})})})}},71837:function(e,t,a){"use strict";a.d(t,{A7:function(){return g},Nq:function(){return c},Sf:function(){return o},WA:function(){return v},XF:function(){return p},YE:function(){return u},fn:function(){return l},iJ:function(){return r},pJ:function(){return d},vt:function(){return m}});var n=a(83464);let s=a(40257).env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api",i=n.Z.create({baseURL:s,headers:{"Content-Type":"application/json"},timeout:1e4,withCredentials:!1});i.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e}),i.interceptors.response.use(e=>e,e=>{var t,a;if((null===(t=e.response)||void 0===t?void 0:t.status)===401){let t=window.location.pathname;if("/"===t||"/properties"===t||t.startsWith("/properties/")||"/login"===t||"/register"===t)return localStorage.removeItem("token"),localStorage.removeItem("auth-storage"),window.dispatchEvent(new Event("storage")),Promise.reject(e);let n=(null===(a=e.config)||void 0===a?void 0:a.url)||"";(n.includes("/auth/")||n.includes("/wishlist")||n.includes("/admin")||n.includes("/profile"))&&(localStorage.removeItem("token"),localStorage.removeItem("auth-storage"),window.dispatchEvent(new Event("storage")),t.includes("/login")||(window.location.href="/login"))}return Promise.reject(e)});let r={register:e=>i.post("/auth/register",e),login:e=>i.post("/auth/login",e),getProfile:()=>i.get("/auth/profile"),updateProfile:e=>i.put("/auth/profile",e),verifyToken:()=>i.get("/auth/verify")},o={getAll:e=>{let t={};return(null==e?void 0:e.page)&&(t.page=e.page),(null==e?void 0:e.limit)&&(t.limit=e.limit),(null==e?void 0:e.status)&&(t.status=e.status),(null==e?void 0:e.search)&&(t.search=e.search),(null==e?void 0:e.category)&&(t.category=e.category),(null==e?void 0:e.purpose)&&(t.purpose=e.purpose),(null==e?void 0:e.subtype)&&(t.subtype=e.subtype),(null==e?void 0:e.minPrice)&&(t.minPrice=e.minPrice),(null==e?void 0:e.maxPrice)&&(t.maxPrice=e.maxPrice),(null==e?void 0:e.minArea)&&(t.minArea=e.minArea),(null==e?void 0:e.maxArea)&&(t.maxArea=e.maxArea),(null==e?void 0:e.bhk)&&(t.bhk=e.bhk),(null==e?void 0:e.bathrooms)&&(t.bathrooms=e.bathrooms),(null==e?void 0:e.furnishing)&&(t.furnishing=e.furnishing),(null==e?void 0:e.availableFor)&&e.availableFor.length>0&&(t.availableFor=e.availableFor),(null==e?void 0:e.availableFrom)&&(t.availableFrom=e.availableFrom),(null==e?void 0:e.constructionStatus)&&(t.constructionStatus=e.constructionStatus),(null==e?void 0:e.investmentType)&&e.investmentType.length>0&&(t.investmentType=e.investmentType),(null==e?void 0:e.powerCapacity)&&(t.powerCapacity=e.powerCapacity),(null==e?void 0:e.meetingRooms)!==void 0&&(t.meetingRooms=e.meetingRooms),(null==e?void 0:e.pantry)!==void 0&&(t.pantry=e.pantry),(null==e?void 0:e.conferenceRoom)!==void 0&&(t.conferenceRoom=e.conferenceRoom),(null==e?void 0:e.cabins)&&(t.cabins=e.cabins),(null==e?void 0:e.washrooms)&&(t.washrooms=e.washrooms),(null==e?void 0:e.floorPreference)&&(t.floorPreference=e.floorPreference),(null==e?void 0:e.locatedOn)&&(t.locatedOn=e.locatedOn),(null==e?void 0:e.officeSpread)&&(t.officeSpread=e.officeSpread),(null==e?void 0:e.situatedIn)&&(t.situatedIn=e.situatedIn),(null==e?void 0:e.businessType)&&e.businessType.length>0&&(t.businessType=e.businessType),(null==e?void 0:e.city)&&(t.city=e.city),(null==e?void 0:e.state)&&(t.state=e.state),(null==e?void 0:e.locality)&&(t.locality=e.locality),(null==e?void 0:e.amenities)&&e.amenities.length>0&&(t.amenities=e.amenities),(null==e?void 0:e.reraApproved)!==void 0&&(t.reraApproved=e.reraApproved),(null==e?void 0:e.ageOfProperty)&&(t.ageOfProperty=e.ageOfProperty),(null==e?void 0:e.possessionStatus)&&(t.possessionStatus=e.possessionStatus),(null==e?void 0:e.facing)&&(t.facing=e.facing),(null==e?void 0:e.parking)&&(t.parking=e.parking),(null==e?void 0:e.sortBy)&&(t.sortBy=e.sortBy),i.get("/properties",{params:t})},getById:e=>i.get("/properties/".concat(e)),create:e=>i.post("/properties",e),update:(e,t)=>i.put("/properties/".concat(e),t),delete:e=>i.delete("/properties/".concat(e)),search:e=>o.getAll({...e,page:e.page,limit:e.limit}),getSimilar:(e,t)=>i.get("/properties/".concat(e,"/similar"),{params:{limit:t}})},l={create:e=>i.post("/leads",e),getAll:e=>i.get("/leads",{params:e}),getById:e=>i.get("/leads/".concat(e)),updateStatus:(e,t)=>i.put("/leads/".concat(e,"/status"),{status:t}),delete:e=>i.delete("/leads/".concat(e)),exportCSV:()=>i.get("/leads/export/csv",{responseType:"blob"})},u={getAll:()=>i.get("/wishlist"),add:e=>i.post("/wishlist",{property_id:e}),remove:e=>i.delete("/wishlist/".concat(e))},c={getDashboard:()=>i.get("/admin/dashboard"),getUsers:e=>i.get("/admin/users",{params:e}),updateUserStatus:(e,t)=>i.put("/admin/users/".concat(e,"/status"),{is_active:t}),updateUserRole:(e,t)=>i.put("/admin/users/".concat(e,"/role"),{role:t}),deleteUser:e=>i.delete("/admin/users/".concat(e)),getAnalytics:e=>i.get("/admin/analytics",{params:e}),getSettings:()=>i.get("/admin/settings"),updateSettings:e=>i.put("/admin/settings",e)},d={getPublicSettings:()=>i.get("/admin/settings/public")},p={upload:e=>{let t=new FormData;t.append("file",e);let a=e.type.startsWith("video/");return i.post("/media/upload",t,{headers:{"Content-Type":"multipart/form-data"},timeout:a?6e5:3e4,onUploadProgress:e=>{e.total&&(e.loaded,e.total)}})},uploadMultiple:e=>{let t=new FormData;e.forEach(e=>t.append("files",e));let a=e.some(e=>e.type.startsWith("video/"));return i.post("/media/upload/multiple",t,{headers:{"Content-Type":"multipart/form-data"},timeout:a?6e5:3e4})}},m={search:e=>i.get("/locations",{params:{query:e}})},g={getAll:()=>i.get("/drafts"),create:e=>i.post("/drafts",e),update:(e,t)=>i.put("/drafts/".concat(e),t),delete:e=>i.delete("/drafts/".concat(e))},v={getAll:()=>i.get("/amenities"),create:e=>i.post("/amenities",e),update:(e,t)=>i.put("/amenities/".concat(e),t),delete:e=>i.delete("/amenities/".concat(e))}},1217:function(e,t,a){"use strict";a.d(t,{t:function(){return i}});var n=a(59625),s=a(89134);let i=(0,n.Ue)()((0,s.tJ)(e=>({user:null,token:null,isAuthenticated:!1,setAuth:(t,a)=>{localStorage.setItem("token",a),e({user:t,token:a,isAuthenticated:!0})},clearAuth:()=>{localStorage.removeItem("token"),e({user:null,token:null,isAuthenticated:!1})},updateUser:t=>e(e=>({user:e.user?{...e.user,...t}:null}))}),{name:"auth-storage",partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated})}))}},function(e){e.O(0,[655,972,883,64,48,971,117,744],function(){return e(e.s=66022)}),_N_E=e.O()}]);