(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[241],{74488:function(e,t,a){Promise.resolve().then(a.bind(a,60575))},39763:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(2265),l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),r=(e,t)=>{let a=(0,s.forwardRef)((a,r)=>{let{color:o="currentColor",size:n=24,strokeWidth:d=2,absoluteStrokeWidth:c,className:u="",children:m,...p}=a;return(0,s.createElement)("svg",{ref:r,...l,width:n,height:n,stroke:o,strokeWidth:c?24*Number(d)/Number(n):d,className:["lucide","lucide-".concat(i(e)),u].join(" "),...p},[...t.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(m)?m:[m]])});return a.displayName="".concat(e),a}},15863:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(39763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},99397:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(39763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},32489:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(39763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},27648:function(e,t,a){"use strict";a.d(t,{default:function(){return l.a}});var s=a(72972),l=a.n(s)},60575:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var s=a(57437),l=a(2265),i=a(99376),r=a(29827),o=a(11713),n=a(21770),d=a(29501),c=a(71837),u=a(1217),m=a(69064),p=a(27648),x=a(15863),h=a(99397),y=a(32489);function g(){var e,t,a,g,f,b,v;let j=(0,i.useParams)(),N=(0,i.useRouter)(),w=(0,r.NL)(),{isAuthenticated:k,user:P}=(0,u.t)(),A=j.id,[S,F]=(0,l.useState)([]),[C,R]=(0,l.useState)([]),[Z,E]=(0,l.useState)(""),[q,I]=(0,l.useState)(!1),[U,B]=(0,l.useState)(0),[T,L]=(0,l.useState)(""),[O,z]=(0,l.useState)(!1),{data:M,isLoading:D}=(0,o.a)({queryKey:["amenities"],queryFn:async()=>(await c.WA.getAll()).data}),W=(null==M?void 0:M.amenities)||[],_=(0,n.D)({mutationFn:e=>c.WA.create(e),onSuccess:()=>{w.invalidateQueries({queryKey:["amenities"]}),L(""),z(!1),m.ZP.success("Amenity added successfully")},onError:e=>{var t,a;m.ZP.error((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.error)||"Failed to add amenity")}}),K=(0,n.D)({mutationFn:e=>c.WA.delete(e),onSuccess:()=>{w.invalidateQueries({queryKey:["amenities"]}),m.ZP.success("Amenity deleted successfully")},onError:e=>{var t,a;m.ZP.error((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.error)||"Failed to delete amenity")}}),{data:V,isLoading:X}=(0,o.a)({queryKey:["property",A],queryFn:async()=>(await c.Sf.getById(A)).data,enabled:!!A&&k&&(null==P?void 0:P.role)==="admin"}),H=null==V?void 0:V.property,{register:J,handleSubmit:G,formState:{errors:Q},watch:$,setValue:Y,reset:ee}=(0,d.cI)({defaultValues:H?{title:H.title,category:H.payload.category,subtype:H.payload.subtype||"",purpose:H.payload.purpose,price:H.payload.price,area:H.payload.area,bhk:H.payload.bhk||"",bathrooms:H.payload.bathrooms,furnishing:H.payload.furnishing,description:H.payload.description||"",city:(null===(e=H.payload.location)||void 0===e?void 0:e.city)||"",state:(null===(t=H.payload.location)||void 0===t?void 0:t.state)||"",locality:(null===(a=H.payload.location)||void 0===a?void 0:a.locality)||"",address:(null===(g=H.payload.location)||void 0===g?void 0:g.address)||"",pincode:(null===(f=H.payload.location)||void 0===f?void 0:f.pincode)||"",latitude:null===(b=H.payload.location)||void 0===b?void 0:b.latitude,longitude:null===(v=H.payload.location)||void 0===v?void 0:v.longitude,amenities:H.payload.amenities||[],features:H.payload.features||[],reraApproved:H.payload.reraApproved||!1,reraNumber:H.payload.reraNumber||"",possessionStatus:H.payload.possessionStatus||"",ageOfProperty:H.payload.ageOfProperty||"",facing:H.payload.facing||"",parking:H.payload.parking||"",totalFloors:H.payload.totalFloors,floorNumber:H.payload.floorNumber,powerCapacity:H.payload.powerCapacity||"",status:H.status}:void 0});(0,l.useEffect)(()=>{if(H){var e,t,a,s,l,i,r;ee({title:H.title,category:H.payload.category,subtype:H.payload.subtype||"",purpose:H.payload.purpose,price:H.payload.price,area:H.payload.area,bhk:H.payload.bhk||"",bathrooms:H.payload.bathrooms,furnishing:H.payload.furnishing,description:H.payload.description||"",city:(null===(e=H.payload.location)||void 0===e?void 0:e.city)||"",state:(null===(t=H.payload.location)||void 0===t?void 0:t.state)||"",locality:(null===(a=H.payload.location)||void 0===a?void 0:a.locality)||"",address:(null===(s=H.payload.location)||void 0===s?void 0:s.address)||"",pincode:(null===(l=H.payload.location)||void 0===l?void 0:l.pincode)||"",latitude:null===(i=H.payload.location)||void 0===i?void 0:i.latitude,longitude:null===(r=H.payload.location)||void 0===r?void 0:r.longitude,amenities:H.payload.amenities||[],features:H.payload.features||[],reraApproved:H.payload.reraApproved||!1,reraNumber:H.payload.reraNumber||"",possessionStatus:H.payload.possessionStatus||"",ageOfProperty:H.payload.ageOfProperty||"",facing:H.payload.facing||"",parking:H.payload.parking||"",totalFloors:H.payload.totalFloors,floorNumber:H.payload.floorNumber,status:H.status}),F(H.payload.images||[]),R(H.payload.videos||[]),E(H.payload.floorPlan||"")}},[H,ee]),(0,l.useEffect)(()=>{k&&(null==P?void 0:P.role)==="admin"||N.push("/")},[k,P,N]);let et=(0,n.D)({mutationFn:e=>c.Sf.update(A,e),onSuccess:()=>{m.ZP.success("Property updated successfully"),N.push("/admin/properties")},onError:e=>{var t,a;m.ZP.error((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.error)||"Failed to update property")}}),ea=async(e,t)=>{if(!e||0===e.length)return;let a="video"===t?104857600:10485760,s=[];if(Array.from(e).forEach(e=>{e.size>a&&s.push(e)}),s.length>0){let e=(s[0].size/1048576).toFixed(2),l=(a/1048576).toFixed(0);m.ZP.error("File too large: ".concat(s[0].name," (").concat(e,"MB). Maximum allowed: ").concat(l,"MB for ").concat("video"===t?"videos":"images",". Please compress your file."),{duration:6e3});return}I(!0),B(0);try{let a=Array.from(e).map(async(t,a)=>{try{let s=await c.XF.upload(t);return B((a+1)/e.length*100),s.data.secure_url||s.data.url}catch(a){var s,l;let e=(null===(l=a.response)||void 0===l?void 0:null===(s=l.data)||void 0===s?void 0:s.error)||a.message||"Failed to upload ".concat(t.name);throw m.ZP.error(e,{duration:6e3}),a}}),s=await Promise.all(a);"image"===t?(F([...S,...s]),m.ZP.success("Images uploaded successfully")):"video"===t?(R([...C,...s]),m.ZP.success("Videos uploaded successfully")):"floorPlan"===t&&(E(s[0]),m.ZP.success("Floor plan uploaded successfully"))}catch(e){console.error("Upload error:",e)}finally{I(!1),B(0)}},es=()=>{if(!T.trim()){m.ZP.error("Please enter an amenity name");return}let e=$("category")||void 0;_.mutate({name:T.trim(),category:e})};return X?(0,s.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,s.jsx)(x.Z,{className:"animate-spin text-accent-primary",size:40})}):H?(0,s.jsx)("div",{className:"min-h-screen bg-background py-12 px-4",children:(0,s.jsxs)("div",{className:"container mx-auto max-w-4xl",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsxs)("h1",{className:"text-4xl font-display font-bold",children:[(0,s.jsx)("span",{className:"text-gradient",children:"Edit"})," ",(0,s.jsx)("span",{className:"text-text-primary",children:"Property"})]}),(0,s.jsx)(p.default,{href:"/admin/properties",className:"btn-secondary",children:"Back to Properties"})]}),(0,s.jsxs)("form",{onSubmit:G(e=>{let t={category:e.category,subtype:e.subtype,purpose:e.purpose,price:parseFloat(e.price.toString()),priceUnit:"₹",area:parseFloat(e.area.toString()),areaUnit:"sq.ft",bhk:e.bhk,bathrooms:e.bathrooms,furnishing:e.furnishing,description:e.description,location:{address:e.address,locality:e.locality,city:e.city,state:e.state,pincode:e.pincode,latitude:e.latitude,longitude:e.longitude},amenities:e.amenities||[],features:e.features||[],images:S,videos:C,floorPlan:Z||void 0,reraApproved:e.reraApproved,reraNumber:e.reraNumber,possessionStatus:e.possessionStatus,ageOfProperty:e.ageOfProperty,facing:e.facing,parking:e.parking,totalFloors:e.totalFloors,floorNumber:e.floorNumber,powerCapacity:e.powerCapacity};et.mutate({title:e.title,payload:t,status:e.status})}),className:"card-luxury space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Status"}),(0,s.jsxs)("select",{...J("status"),className:"input-elegant w-full",children:[(0,s.jsx)("option",{value:"Active",children:"Active"}),(0,s.jsx)("option",{value:"Sold",children:"Sold"}),(0,s.jsx)("option",{value:"Rented",children:"Rented"}),(0,s.jsx)("option",{value:"Inactive",children:"Inactive"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-display font-bold mb-4 text-accent-primary",children:"Basic Information"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Title *"}),(0,s.jsx)("input",{type:"text",...J("title",{required:"Title is required"}),className:"input-elegant w-full"}),Q.title&&(0,s.jsx)("p",{className:"text-error text-sm mt-1",children:Q.title.message})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Category *"}),(0,s.jsxs)("select",{...J("category",{required:"Category is required"}),className:"input-elegant w-full",children:[(0,s.jsx)("option",{value:"Residential",children:"Residential"}),(0,s.jsx)("option",{value:"Commercial",children:"Commercial"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Purpose *"}),(0,s.jsxs)("select",{...J("purpose",{required:"Purpose is required"}),className:"input-elegant w-full",children:[(0,s.jsx)("option",{value:"Buy",children:"Buy"}),(0,s.jsx)("option",{value:"Rent",children:"Rent"}),(0,s.jsx)("option",{value:"Lease",children:"Lease"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Subtype"}),(0,s.jsx)("input",{type:"text",...J("subtype"),className:"input-elegant w-full",placeholder:"e.g., Apartment, Villa, Office Space"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Description *"}),(0,s.jsx)("textarea",{...J("description",{required:"Description is required"}),rows:6,className:"input-elegant w-full"}),Q.description&&(0,s.jsx)("p",{className:"text-error text-sm mt-1",children:Q.description.message})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-display font-bold mb-4 text-accent-primary",children:"Pricing & Area"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Price (₹) *"}),(0,s.jsx)("input",{type:"number",min:"0",step:"0.01",...J("price",{required:"Price is required",valueAsNumber:!0}),className:"input-elegant w-full"}),Q.price&&(0,s.jsx)("p",{className:"text-error text-sm mt-1",children:Q.price.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Area (sq.ft) *"}),(0,s.jsx)("input",{type:"number",min:"0",step:"any",...J("area",{required:"Area is required",valueAsNumber:!0}),className:"input-elegant w-full"}),Q.area&&(0,s.jsx)("p",{className:"text-error text-sm mt-1",children:Q.area.message})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-display font-bold mb-4 text-accent-primary",children:"Property Details"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"BHK"}),(0,s.jsx)("input",{type:"text",...J("bhk"),className:"input-elegant w-full",placeholder:"3 BHK"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Bathrooms"}),(0,s.jsx)("input",{type:"number",...J("bathrooms",{valueAsNumber:!0}),className:"input-elegant w-full",placeholder:"2"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Furnishing"}),(0,s.jsxs)("select",{...J("furnishing"),className:"input-elegant w-full",children:[(0,s.jsx)("option",{value:"",children:"Select"}),(0,s.jsx)("option",{value:"Furnished",children:"Furnished"}),(0,s.jsx)("option",{value:"Semi-Furnished",children:"Semi-Furnished"}),(0,s.jsx)("option",{value:"Unfurnished",children:"Unfurnished"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Power Capacity"}),(0,s.jsx)("input",{type:"text",...J("powerCapacity"),className:"input-elegant w-full",placeholder:"e.g., 50 kW, 100 kVA"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Facing"}),(0,s.jsx)("input",{type:"text",...J("facing"),className:"input-elegant w-full",placeholder:"North"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Parking"}),(0,s.jsx)("input",{type:"text",...J("parking"),className:"input-elegant w-full",placeholder:"2"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Total Floors"}),(0,s.jsx)("input",{type:"number",...J("totalFloors",{valueAsNumber:!0}),className:"input-elegant w-full",placeholder:"10"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Floor Number"}),(0,s.jsx)("input",{type:"number",...J("floorNumber",{valueAsNumber:!0}),className:"input-elegant w-full",placeholder:"5"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Age of Property"}),(0,s.jsx)("input",{type:"text",...J("ageOfProperty"),className:"input-elegant w-full",placeholder:"New Construction"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Possession Status"}),(0,s.jsx)("input",{type:"text",...J("possessionStatus"),className:"input-elegant w-full",placeholder:"Ready to Move"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-display font-bold mb-4 text-accent-primary",children:"Location"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"City *"}),(0,s.jsx)("input",{type:"text",...J("city",{required:"City is required"}),className:"input-elegant w-full"}),Q.city&&(0,s.jsx)("p",{className:"text-error text-sm mt-1",children:Q.city.message})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"State"}),(0,s.jsx)("input",{type:"text",...J("state"),className:"input-elegant w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Locality"}),(0,s.jsx)("input",{type:"text",...J("locality"),className:"input-elegant w-full"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Address"}),(0,s.jsx)("input",{type:"text",...J("address"),className:"input-elegant w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Pincode"}),(0,s.jsx)("input",{type:"text",...J("pincode"),className:"input-elegant w-full"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Latitude"}),(0,s.jsx)("input",{type:"number",step:"any",...J("latitude",{valueAsNumber:!0}),className:"input-elegant w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Longitude"}),(0,s.jsx)("input",{type:"number",step:"any",...J("longitude",{valueAsNumber:!0}),className:"input-elegant w-full"})]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-display font-bold mb-4 text-accent-primary",children:"RERA Information"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{children:(0,s.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",...J("reraApproved"),className:"w-4 h-4 text-accent-primary bg-surface border-border rounded focus:ring-2 focus:ring-accent-primary"}),(0,s.jsx)("span",{className:"text-sm font-semibold text-text-primary",children:"RERA Approved"})]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"RERA Number"}),(0,s.jsx)("input",{type:"text",...J("reraNumber"),className:"input-elegant w-full",placeholder:"RERA/123/2024"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-display font-bold text-accent-primary",children:"Amenities"}),(0,s.jsxs)("button",{type:"button",onClick:()=>z(!O),className:"btn-secondary flex items-center gap-2",children:[(0,s.jsx)(h.Z,{size:18}),"Add Custom"]})]}),O&&(0,s.jsx)("div",{className:"mb-4 p-4 bg-surface-muted rounded-lg border border-border",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:T,onChange:e=>L(e.target.value),placeholder:"Enter amenity name (e.g., Rooftop Garden)",className:"input-elegant flex-1",onKeyPress:e=>{"Enter"===e.key&&es()}}),(0,s.jsx)("button",{type:"button",onClick:es,disabled:_.isPending||!T.trim(),className:"btn-primary",children:_.isPending?(0,s.jsx)(x.Z,{className:"animate-spin",size:18}):"Add"}),(0,s.jsx)("button",{type:"button",onClick:()=>{z(!1),L("")},className:"btn-secondary",children:"Cancel"})]})}),D?(0,s.jsx)("div",{className:"flex justify-center py-8",children:(0,s.jsx)(x.Z,{className:"animate-spin text-accent-primary",size:24})}):(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:W.map(e=>{var t;let a=(null===(t=$("amenities"))||void 0===t?void 0:t.includes(e.name))||!1;return(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 p-2 rounded-lg hover:bg-surface-muted transition-colors",children:[(0,s.jsxs)("label",{className:"flex items-center space-x-2 flex-1 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:a,onChange:t=>{let a=$("amenities")||[];t.target.checked?Y("amenities",[...a,e.name]):Y("amenities",a.filter(t=>t!==e.name))},className:"w-4 h-4 text-accent-primary bg-surface border-border rounded focus:ring-2 focus:ring-accent-primary"}),(0,s.jsx)("span",{className:"text-sm text-text-primary",children:e.name})]}),e.id&&(0,s.jsx)("button",{type:"button",onClick:()=>{confirm('Are you sure you want to delete "'.concat(e.name,'"? This will remove it from all properties.'))&&K.mutate(e.id)},disabled:K.isPending,className:"text-error hover:text-error/80 transition-colors p-1 hover:bg-error/10 rounded",title:"Delete amenity",children:(0,s.jsx)(y.Z,{size:14})})]},e.id||e.name)})}),$("amenities")&&$("amenities").length>0&&(0,s.jsxs)("div",{className:"mt-4 pt-4 border-t border-border",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-text-primary mb-3",children:"Selected Amenities"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:$("amenities").map(e=>{let t=!W.some(t=>t.name===e);return(0,s.jsxs)("div",{className:"flex items-center gap-2 rounded-full px-3 py-1.5 text-sm ".concat(t?"bg-accent-primary/10 border border-accent-primary/30":"bg-surface-muted border border-border"),children:[(0,s.jsx)("span",{className:"text-text-primary",children:e}),t&&(0,s.jsx)("span",{className:"text-xs text-text-secondary",children:"(Custom)"}),(0,s.jsx)("button",{type:"button",onClick:()=>{Y("amenities",($("amenities")||[]).filter(t=>t!==e))},className:"text-text-secondary hover:text-error transition-colors ml-1",title:"Remove from selection",children:(0,s.jsx)(y.Z,{size:14})})]},e)})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-display font-bold mb-4 text-accent-primary",children:"Features"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:["RERA Approved","Ready to Move","Vaastu Compliant","Corner Property","Main Road Facing","Premium Location","Green Building","Smart Home","Pet Friendly"].map(e=>{var t;return(0,s.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:(null===(t=$("features"))||void 0===t?void 0:t.includes(e))||!1,onChange:t=>{let a=$("features")||[];t.target.checked?Y("features",[...a,e]):Y("features",a.filter(t=>t!==e))},className:"w-4 h-4 text-accent-primary bg-surface border-border rounded focus:ring-2 focus:ring-accent-primary"}),(0,s.jsx)("span",{className:"text-sm text-text-primary",children:e})]},e)})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-display font-bold mb-4 text-accent-primary",children:"Media Upload"}),q&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("div",{className:"w-full bg-surface-muted rounded-full h-2.5",children:(0,s.jsx)("div",{className:"bg-gradient-primary h-2.5 rounded-full transition-all duration-300",style:{width:"".concat(U,"%")}})}),(0,s.jsxs)("p",{className:"text-text-secondary text-sm mt-2",children:["Uploading... ",Math.round(U),"%"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Upload Images"}),(0,s.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>e.target.files&&ea(e.target.files,"image"),disabled:q,className:"input-elegant w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Upload Videos"}),(0,s.jsx)("input",{type:"file",accept:"video/*",multiple:!0,onChange:e=>e.target.files&&ea(e.target.files,"video"),disabled:q,className:"input-elegant w-full"}),(0,s.jsx)("p",{className:"text-xs text-text-secondary mt-1",children:"Max 100MB per video (ImageKit limit). For larger files, compress before uploading."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Upload Floor Plan"}),(0,s.jsx)("input",{type:"file",accept:"image/*,.pdf",onChange:e=>e.target.files&&ea(e.target.files,"floorPlan"),disabled:q,className:"input-elegant w-full"})]})]}),S.length>0&&(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold mb-3 text-accent-primary",children:["Images (",S.length,")"]}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:S.map((e,t)=>(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)("img",{src:e,alt:"Property ".concat(t+1),className:"w-full h-32 object-cover rounded-lg shadow-soft"}),(0,s.jsx)("button",{type:"button",onClick:()=>F(S.filter((e,a)=>a!==t)),className:"absolute top-2 right-2 bg-error text-white rounded-full w-6 h-6 flex items-center justify-center text-xs shadow-soft hover:shadow-medium transition-all opacity-0 group-hover:opacity-100",children:(0,s.jsx)(y.Z,{size:14})})]},t))})]}),C.length>0&&(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold mb-3 text-accent-primary",children:["Videos (",C.length,")"]}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:C.map((e,t)=>(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsxs)("div",{className:"relative w-full h-32 bg-surface-muted rounded-lg overflow-hidden shadow-soft",children:[(0,s.jsx)("video",{src:e,className:"w-full h-full object-cover",muted:!0,preload:"metadata"}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-white/90 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-xl text-accent-primary",children:"▶"})})})]}),(0,s.jsx)("button",{type:"button",onClick:()=>R(C.filter((e,a)=>a!==t)),className:"absolute top-2 right-2 bg-error text-white rounded-full w-6 h-6 flex items-center justify-center text-xs shadow-soft hover:shadow-medium transition-all opacity-0 group-hover:opacity-100",children:(0,s.jsx)(y.Z,{size:14})})]},t))})]}),Z&&(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-3 text-accent-primary",children:"Floor Plan"}),(0,s.jsxs)("div",{className:"relative group max-w-md",children:[(0,s.jsx)("img",{src:Z,alt:"Floor Plan",className:"w-full h-auto rounded-lg shadow-soft"}),(0,s.jsx)("button",{type:"button",onClick:()=>E(""),className:"absolute top-2 right-2 bg-error text-white rounded-full w-6 h-6 flex items-center justify-center text-xs shadow-soft hover:shadow-medium transition-all opacity-0 group-hover:opacity-100",children:(0,s.jsx)(y.Z,{size:14})})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("button",{type:"submit",disabled:et.isPending,className:"btn-primary flex-1",children:et.isPending?"Updating...":"Update Property"}),(0,s.jsx)(p.default,{href:"/admin/properties",className:"btn-secondary",children:"Cancel"})]})]})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,s.jsx)("p",{className:"text-text-secondary",children:"Property not found"})})}},71837:function(e,t,a){"use strict";a.d(t,{A7:function(){return x},Nq:function(){return c},Sf:function(){return o},WA:function(){return h},XF:function(){return m},YE:function(){return d},fn:function(){return n},iJ:function(){return r},pJ:function(){return u},vt:function(){return p}});var s=a(83464);let l=a(40257).env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api",i=s.Z.create({baseURL:l,headers:{"Content-Type":"application/json"},timeout:1e4,withCredentials:!1});i.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e}),i.interceptors.response.use(e=>e,e=>{var t,a;if((null===(t=e.response)||void 0===t?void 0:t.status)===401){let t=window.location.pathname;if("/"===t||"/properties"===t||t.startsWith("/properties/")||"/login"===t||"/register"===t)return localStorage.removeItem("token"),localStorage.removeItem("auth-storage"),window.dispatchEvent(new Event("storage")),Promise.reject(e);let s=(null===(a=e.config)||void 0===a?void 0:a.url)||"";(s.includes("/auth/")||s.includes("/wishlist")||s.includes("/admin")||s.includes("/profile"))&&(localStorage.removeItem("token"),localStorage.removeItem("auth-storage"),window.dispatchEvent(new Event("storage")),t.includes("/login")||(window.location.href="/login"))}return Promise.reject(e)});let r={register:e=>i.post("/auth/register",e),login:e=>i.post("/auth/login",e),getProfile:()=>i.get("/auth/profile"),updateProfile:e=>i.put("/auth/profile",e),verifyToken:()=>i.get("/auth/verify")},o={getAll:e=>{let t={};return(null==e?void 0:e.page)&&(t.page=e.page),(null==e?void 0:e.limit)&&(t.limit=e.limit),(null==e?void 0:e.status)&&(t.status=e.status),(null==e?void 0:e.search)&&(t.search=e.search),(null==e?void 0:e.category)&&(t.category=e.category),(null==e?void 0:e.purpose)&&(t.purpose=e.purpose),(null==e?void 0:e.subtype)&&(t.subtype=e.subtype),(null==e?void 0:e.minPrice)&&(t.minPrice=e.minPrice),(null==e?void 0:e.maxPrice)&&(t.maxPrice=e.maxPrice),(null==e?void 0:e.minArea)&&(t.minArea=e.minArea),(null==e?void 0:e.maxArea)&&(t.maxArea=e.maxArea),(null==e?void 0:e.bhk)&&(t.bhk=e.bhk),(null==e?void 0:e.bathrooms)&&(t.bathrooms=e.bathrooms),(null==e?void 0:e.furnishing)&&(t.furnishing=e.furnishing),(null==e?void 0:e.availableFor)&&e.availableFor.length>0&&(t.availableFor=e.availableFor),(null==e?void 0:e.availableFrom)&&(t.availableFrom=e.availableFrom),(null==e?void 0:e.constructionStatus)&&(t.constructionStatus=e.constructionStatus),(null==e?void 0:e.investmentType)&&e.investmentType.length>0&&(t.investmentType=e.investmentType),(null==e?void 0:e.powerCapacity)&&(t.powerCapacity=e.powerCapacity),(null==e?void 0:e.meetingRooms)!==void 0&&(t.meetingRooms=e.meetingRooms),(null==e?void 0:e.pantry)!==void 0&&(t.pantry=e.pantry),(null==e?void 0:e.conferenceRoom)!==void 0&&(t.conferenceRoom=e.conferenceRoom),(null==e?void 0:e.cabins)&&(t.cabins=e.cabins),(null==e?void 0:e.washrooms)&&(t.washrooms=e.washrooms),(null==e?void 0:e.floorPreference)&&(t.floorPreference=e.floorPreference),(null==e?void 0:e.locatedOn)&&(t.locatedOn=e.locatedOn),(null==e?void 0:e.officeSpread)&&(t.officeSpread=e.officeSpread),(null==e?void 0:e.situatedIn)&&(t.situatedIn=e.situatedIn),(null==e?void 0:e.businessType)&&e.businessType.length>0&&(t.businessType=e.businessType),(null==e?void 0:e.city)&&(t.city=e.city),(null==e?void 0:e.state)&&(t.state=e.state),(null==e?void 0:e.locality)&&(t.locality=e.locality),(null==e?void 0:e.amenities)&&e.amenities.length>0&&(t.amenities=e.amenities),(null==e?void 0:e.reraApproved)!==void 0&&(t.reraApproved=e.reraApproved),(null==e?void 0:e.ageOfProperty)&&(t.ageOfProperty=e.ageOfProperty),(null==e?void 0:e.possessionStatus)&&(t.possessionStatus=e.possessionStatus),(null==e?void 0:e.facing)&&(t.facing=e.facing),(null==e?void 0:e.parking)&&(t.parking=e.parking),(null==e?void 0:e.sortBy)&&(t.sortBy=e.sortBy),i.get("/properties",{params:t})},getById:e=>i.get("/properties/".concat(e)),create:e=>i.post("/properties",e),update:(e,t)=>i.put("/properties/".concat(e),t),delete:e=>i.delete("/properties/".concat(e)),search:e=>o.getAll({...e,page:e.page,limit:e.limit}),getSimilar:(e,t)=>i.get("/properties/".concat(e,"/similar"),{params:{limit:t}})},n={create:e=>i.post("/leads",e),getAll:e=>i.get("/leads",{params:e}),getById:e=>i.get("/leads/".concat(e)),updateStatus:(e,t)=>i.put("/leads/".concat(e,"/status"),{status:t}),delete:e=>i.delete("/leads/".concat(e)),exportCSV:()=>i.get("/leads/export/csv",{responseType:"blob"})},d={getAll:()=>i.get("/wishlist"),add:e=>i.post("/wishlist",{property_id:e}),remove:e=>i.delete("/wishlist/".concat(e))},c={getDashboard:()=>i.get("/admin/dashboard"),getUsers:e=>i.get("/admin/users",{params:e}),updateUserStatus:(e,t)=>i.put("/admin/users/".concat(e,"/status"),{is_active:t}),updateUserRole:(e,t)=>i.put("/admin/users/".concat(e,"/role"),{role:t}),deleteUser:e=>i.delete("/admin/users/".concat(e)),getAnalytics:e=>i.get("/admin/analytics",{params:e}),getSettings:()=>i.get("/admin/settings"),updateSettings:e=>i.put("/admin/settings",e)},u={getPublicSettings:()=>i.get("/admin/settings/public")},m={upload:e=>{let t=new FormData;t.append("file",e);let a=e.type.startsWith("video/");return i.post("/media/upload",t,{headers:{"Content-Type":"multipart/form-data"},timeout:a?6e5:3e4,onUploadProgress:e=>{e.total&&(e.loaded,e.total)}})},uploadMultiple:e=>{let t=new FormData;e.forEach(e=>t.append("files",e));let a=e.some(e=>e.type.startsWith("video/"));return i.post("/media/upload/multiple",t,{headers:{"Content-Type":"multipart/form-data"},timeout:a?6e5:3e4})}},p={search:e=>i.get("/locations",{params:{query:e}})},x={getAll:()=>i.get("/drafts"),create:e=>i.post("/drafts",e),update:(e,t)=>i.put("/drafts/".concat(e),t),delete:e=>i.delete("/drafts/".concat(e))},h={getAll:()=>i.get("/amenities"),create:e=>i.post("/amenities",e),update:(e,t)=>i.put("/amenities/".concat(e),t),delete:e=>i.delete("/amenities/".concat(e))}},1217:function(e,t,a){"use strict";a.d(t,{t:function(){return i}});var s=a(59625),l=a(89134);let i=(0,s.Ue)()((0,l.tJ)(e=>({user:null,token:null,isAuthenticated:!1,setAuth:(t,a)=>{localStorage.setItem("token",a),e({user:t,token:a,isAuthenticated:!0})},clearAuth:()=>{localStorage.removeItem("token"),e({user:null,token:null,isAuthenticated:!1})},updateUser:t=>e(e=>({user:e.user?{...e.user,...t}:null}))}),{name:"auth-storage",partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated})}))}},function(e){e.O(0,[655,972,713,883,64,48,971,117,744],function(){return e(e.s=74488)}),_N_E=e.O()}]);