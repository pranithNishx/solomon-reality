(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[283],{16462:function(e,t,s){Promise.resolve().then(s.bind(s,87364))},42208:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});let i=(0,s(39763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},99397:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});let i=(0,s(39763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},27648:function(e,t,s){"use strict";s.d(t,{default:function(){return a.a}});var i=s(72972),a=s.n(i)},87364:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var i=s(57437),a=s(2265),l=s(99376),n=s(27648),r=s(29827),c=s(11713),d=s(21770),o=s(71837),m=s(1217),p=s(15863),x=s(99397),u=s(18930);let y=(0,s(39763).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);var h=s(42208),f=s(40521),v=s(69064);function j(){let e=(0,l.useRouter)(),{isAuthenticated:t,user:s}=(0,m.t)(),j=(0,r.NL)(),[b,g]=(0,a.useState)(1),[N,w]=(0,a.useState)("Active");(0,a.useEffect)(()=>{t&&(null==s?void 0:s.role)==="admin"||e.push("/")},[t,s,e]);let{data:k,isLoading:E}=(0,c.a)({queryKey:["admin-properties",b,N],queryFn:async()=>(await o.Sf.getAll({page:b,limit:20,status:N})).data,enabled:t&&(null==s?void 0:s.role)==="admin"}),Z=(0,d.D)({mutationFn:e=>o.Sf.delete(e),onSuccess:()=>{j.invalidateQueries({queryKey:["admin-properties"]}),v.ZP.success("Property deleted successfully")},onError:e=>{var t,s;v.ZP.error((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.error)||"Failed to delete property")}});if(E)return(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,i.jsx)(p.Z,{className:"animate-spin text-accent-primary",size:32})});let M=(null==k?void 0:k.properties)||[],P=(null==k?void 0:k.pagination)||{page:1,limit:20,total:0,pages:1};return(0,i.jsx)("div",{className:"min-h-screen bg-gradient-soft p-6",children:(0,i.jsxs)("div",{className:"max-w-[1280px] mx-auto px-4 sm:px-6 lg:px-8",children:[(0,i.jsxs)(f.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8 flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-4xl font-display font-bold text-text-primary mb-2",children:"Properties Management"}),(0,i.jsx)("p",{className:"text-text-secondary",children:"Manage all properties"})]}),(0,i.jsx)(n.default,{href:"/admin/properties/new",children:(0,i.jsxs)("button",{className:"btn-primary flex items-center gap-2",children:[(0,i.jsx)(x.Z,{size:20}),"Add Property"]})})]}),(0,i.jsx)(f.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card-luxury p-6 mb-6",children:(0,i.jsx)("div",{className:"flex gap-4",children:["Active","Sold","Rented","Inactive"].map(e=>(0,i.jsx)("button",{onClick:()=>w(e),className:"px-4 py-2 rounded-lg font-semibold transition-all ".concat(N===e?"bg-accent-primary text-white":"bg-surface-muted text-text-secondary hover:text-accent-primary"),children:e},e))})}),(0,i.jsx)(f.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:M.length>0?M.map((e,t)=>{var s,a,l,r,c;return(0,i.jsxs)(f.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3+.1*t},className:"card-luxury overflow-hidden",children:[(0,i.jsxs)("div",{className:"relative h-48 bg-surface-muted",children:[(null===(a=e.payload)||void 0===a?void 0:null===(s=a.images)||void 0===s?void 0:s[0])?(0,i.jsx)("img",{src:e.payload.images[0],alt:e.title,className:"w-full h-full object-cover"}):(0,i.jsx)("div",{className:"w-full h-full flex items-center justify-center text-text-secondary",children:"No Image"}),(0,i.jsx)("div",{className:"absolute top-4 right-4",children:(0,i.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("Active"===e.status?"bg-success/20 text-success":"Sold"===e.status?"bg-error/20 text-error":"Rented"===e.status?"bg-warning/20 text-warning":"bg-text-secondary/20 text-text-secondary"),children:e.status})})]}),(0,i.jsxs)("div",{className:"p-4 relative",children:[(0,i.jsx)("div",{className:"absolute top-4 right-4",children:(0,i.jsx)("button",{onClick:()=>{confirm("Are you sure you want to delete this property?")&&Z.mutate(e.id)},className:"px-3 py-1.5 border border-[#EF7C79] text-[#EF7C79] rounded-md hover:bg-[#EF7C79]/10 transition-colors text-sm font-semibold",disabled:Z.isPending,title:"Delete property",children:(0,i.jsx)(u.Z,{size:16,className:"inline"})})}),(0,i.jsx)("h3",{className:"text-xl font-semibold text-text-primary mb-2 line-clamp-2 pr-20",children:e.title}),(0,i.jsx)("p",{className:"text-text-secondary text-sm mb-4 line-clamp-2",children:(null===(l=e.payload)||void 0===l?void 0:l.description)||"No description"}),(0,i.jsxs)("div",{className:"flex items-center justify-between text-sm mb-4",children:[(0,i.jsxs)("span",{className:"text-accent-primary font-semibold",children:["â‚¹",(null===(c=e.payload)||void 0===c?void 0:null===(r=c.price)||void 0===r?void 0:r.toLocaleString())||"N/A"]}),(0,i.jsxs)("span",{className:"text-text-secondary",children:[e.views||0," views"]})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(n.default,{href:"/admin/properties/".concat(e.id,"/edit"),className:"flex-1",children:(0,i.jsxs)("button",{className:"btn-secondary w-full flex items-center justify-center gap-2",title:"Edit property",children:[(0,i.jsx)(y,{size:16}),"Edit"]})}),(0,i.jsx)(n.default,{href:"/properties/".concat(e.id),className:"flex-1",children:(0,i.jsxs)("button",{className:"btn-secondary w-full flex items-center justify-center gap-2",title:"View property",children:[(0,i.jsx)(h.Z,{size:16}),"View"]})})]})]})]},e.id)}):(0,i.jsx)("div",{className:"col-span-full text-center py-12",children:(0,i.jsx)("p",{className:"text-text-secondary",children:"No properties found"})})}),P.pages>1&&(0,i.jsxs)(f.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"flex items-center justify-between mt-6",children:[(0,i.jsxs)("p",{className:"text-text-secondary text-sm",children:["Showing ",(P.page-1)*P.limit+1," to ",Math.min(P.page*P.limit,P.total)," of ",P.total," properties"]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("button",{onClick:()=>g(e=>Math.max(1,e-1)),disabled:1===b,className:"btn-secondary",children:"Previous"}),(0,i.jsx)("button",{onClick:()=>g(e=>Math.min(P.pages,e+1)),disabled:b===P.pages,className:"btn-secondary",children:"Next"})]})]})]})})}}},function(e){e.O(0,[655,972,230,713,883,64,823,971,117,744],function(){return e(e.s=16462)}),_N_E=e.O()}]);