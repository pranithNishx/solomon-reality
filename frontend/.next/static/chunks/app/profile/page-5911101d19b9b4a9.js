(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{46163:function(e,t,n){Promise.resolve().then(n.bind(n,1380))},15863:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(39763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},89345:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(39763).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},13041:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(39763).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},83229:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(39763).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},92369:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(39763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1380:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var a=n(57437),i=n(2265),s=n(99376),r=n(29501),l=n(29827),o=n(11713),u=n(21770),c=n(71837),d=n(1217),p=n(15863),m=n(92369),v=n(89345),h=n(13041),f=n(83229),g=n(40521),y=n(69064);function x(){var e,t;let n=(0,s.useRouter)(),{isAuthenticated:x,user:b,updateUser:j}=(0,d.t)(),k=(0,l.NL)();(0,i.useEffect)(()=>{x||n.push("/login?redirect=/profile")},[x,n]);let{data:w,isLoading:N}=(0,o.a)({queryKey:["user-profile"],queryFn:async()=>(await c.iJ.getProfile()).data,enabled:x}),{register:P,handleSubmit:A,formState:{errors:S}}=(0,r.cI)({defaultValues:{name:(null==w?void 0:null===(e=w.user)||void 0===e?void 0:e.name)||(null==b?void 0:b.name)||"",phone:(null==w?void 0:null===(t=w.user)||void 0===t?void 0:t.phone)||(null==b?void 0:b.phone)||""}}),Z=(0,u.D)({mutationFn:e=>c.iJ.updateProfile(e),onSuccess:e=>{j(e.data.user),k.invalidateQueries({queryKey:["user-profile"]}),y.ZP.success("Profile updated successfully")},onError:e=>{var t,n;y.ZP.error((null===(n=e.response)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.error)||"Failed to update profile")}});if(N)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)(p.Z,{className:"animate-spin text-accent-primary",size:32})});let E=(null==w?void 0:w.user)||b;return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-soft p-6",children:(0,a.jsxs)("div",{className:"container mx-auto max-w-4xl",children:[(0,a.jsxs)(g.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-display font-bold text-text-primary mb-2",children:"My Profile"}),(0,a.jsx)("p",{className:"text-text-secondary",children:"Manage your account information"})]}),(0,a.jsx)(g.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card-luxury p-8",children:(0,a.jsxs)("form",{onSubmit:A(e=>{Z.mutate(e)}),className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:[(0,a.jsx)(m.Z,{className:"inline mr-2",size:16}),"Full Name"]}),(0,a.jsx)("input",{type:"text",...P("name",{required:"Name is required"}),className:"input-elegant w-full",placeholder:"Enter your full name"}),S.name&&(0,a.jsx)("p",{className:"text-error text-sm mt-1",children:S.name.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:[(0,a.jsx)(v.Z,{className:"inline mr-2",size:16}),"Email Address"]}),(0,a.jsx)("input",{type:"email",value:(null==E?void 0:E.email)||"",disabled:!0,className:"input-elegant w-full bg-surface-muted cursor-not-allowed"}),(0,a.jsx)("p",{className:"text-text-secondary text-xs mt-1",children:"Email cannot be changed"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:[(0,a.jsx)(h.Z,{className:"inline mr-2",size:16}),"Phone Number"]}),(0,a.jsx)("input",{type:"tel",...P("phone"),className:"input-elegant w-full",placeholder:"Enter your phone number"}),S.phone&&(0,a.jsx)("p",{className:"text-error text-sm mt-1",children:S.phone.message})]}),(0,a.jsx)("div",{className:"pt-4 border-t border-border",children:(0,a.jsx)("button",{type:"submit",disabled:Z.isPending,className:"btn-primary flex items-center gap-2",children:Z.isPending?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.Z,{className:"animate-spin",size:20}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.Z,{size:20}),"Save Changes"]})})})]})})]})})}},71837:function(e,t,n){"use strict";n.d(t,{A7:function(){return v},Nq:function(){return c},Sf:function(){return l},WA:function(){return h},XF:function(){return p},YE:function(){return u},fn:function(){return o},iJ:function(){return r},pJ:function(){return d},vt:function(){return m}});var a=n(83464);let i=n(40257).env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api",s=a.Z.create({baseURL:i,headers:{"Content-Type":"application/json"},timeout:1e4,withCredentials:!1});s.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e}),s.interceptors.response.use(e=>e,e=>{var t,n;if((null===(t=e.response)||void 0===t?void 0:t.status)===401){let t=window.location.pathname;if("/"===t||"/properties"===t||t.startsWith("/properties/")||"/login"===t||"/register"===t)return localStorage.removeItem("token"),localStorage.removeItem("auth-storage"),window.dispatchEvent(new Event("storage")),Promise.reject(e);let a=(null===(n=e.config)||void 0===n?void 0:n.url)||"";(a.includes("/auth/")||a.includes("/wishlist")||a.includes("/admin")||a.includes("/profile"))&&(localStorage.removeItem("token"),localStorage.removeItem("auth-storage"),window.dispatchEvent(new Event("storage")),t.includes("/login")||(window.location.href="/login"))}return Promise.reject(e)});let r={register:e=>s.post("/auth/register",e),login:e=>s.post("/auth/login",e),getProfile:()=>s.get("/auth/profile"),updateProfile:e=>s.put("/auth/profile",e),verifyToken:()=>s.get("/auth/verify")},l={getAll:e=>{let t={};return(null==e?void 0:e.page)&&(t.page=e.page),(null==e?void 0:e.limit)&&(t.limit=e.limit),(null==e?void 0:e.status)&&(t.status=e.status),(null==e?void 0:e.search)&&(t.search=e.search),(null==e?void 0:e.category)&&(t.category=e.category),(null==e?void 0:e.purpose)&&(t.purpose=e.purpose),(null==e?void 0:e.subtype)&&(t.subtype=e.subtype),(null==e?void 0:e.minPrice)&&(t.minPrice=e.minPrice),(null==e?void 0:e.maxPrice)&&(t.maxPrice=e.maxPrice),(null==e?void 0:e.minArea)&&(t.minArea=e.minArea),(null==e?void 0:e.maxArea)&&(t.maxArea=e.maxArea),(null==e?void 0:e.bhk)&&(t.bhk=e.bhk),(null==e?void 0:e.bathrooms)&&(t.bathrooms=e.bathrooms),(null==e?void 0:e.furnishing)&&(t.furnishing=e.furnishing),(null==e?void 0:e.availableFor)&&e.availableFor.length>0&&(t.availableFor=e.availableFor),(null==e?void 0:e.availableFrom)&&(t.availableFrom=e.availableFrom),(null==e?void 0:e.constructionStatus)&&(t.constructionStatus=e.constructionStatus),(null==e?void 0:e.investmentType)&&e.investmentType.length>0&&(t.investmentType=e.investmentType),(null==e?void 0:e.powerCapacity)&&(t.powerCapacity=e.powerCapacity),(null==e?void 0:e.meetingRooms)!==void 0&&(t.meetingRooms=e.meetingRooms),(null==e?void 0:e.pantry)!==void 0&&(t.pantry=e.pantry),(null==e?void 0:e.conferenceRoom)!==void 0&&(t.conferenceRoom=e.conferenceRoom),(null==e?void 0:e.cabins)&&(t.cabins=e.cabins),(null==e?void 0:e.washrooms)&&(t.washrooms=e.washrooms),(null==e?void 0:e.floorPreference)&&(t.floorPreference=e.floorPreference),(null==e?void 0:e.locatedOn)&&(t.locatedOn=e.locatedOn),(null==e?void 0:e.officeSpread)&&(t.officeSpread=e.officeSpread),(null==e?void 0:e.situatedIn)&&(t.situatedIn=e.situatedIn),(null==e?void 0:e.businessType)&&e.businessType.length>0&&(t.businessType=e.businessType),(null==e?void 0:e.city)&&(t.city=e.city),(null==e?void 0:e.state)&&(t.state=e.state),(null==e?void 0:e.locality)&&(t.locality=e.locality),(null==e?void 0:e.amenities)&&e.amenities.length>0&&(t.amenities=e.amenities),(null==e?void 0:e.reraApproved)!==void 0&&(t.reraApproved=e.reraApproved),(null==e?void 0:e.ageOfProperty)&&(t.ageOfProperty=e.ageOfProperty),(null==e?void 0:e.possessionStatus)&&(t.possessionStatus=e.possessionStatus),(null==e?void 0:e.facing)&&(t.facing=e.facing),(null==e?void 0:e.parking)&&(t.parking=e.parking),(null==e?void 0:e.sortBy)&&(t.sortBy=e.sortBy),s.get("/properties",{params:t})},getById:e=>s.get("/properties/".concat(e)),create:e=>s.post("/properties",e),update:(e,t)=>s.put("/properties/".concat(e),t),delete:e=>s.delete("/properties/".concat(e)),search:e=>l.getAll({...e,page:e.page,limit:e.limit}),getSimilar:(e,t)=>s.get("/properties/".concat(e,"/similar"),{params:{limit:t}})},o={create:e=>s.post("/leads",e),getAll:e=>s.get("/leads",{params:e}),getById:e=>s.get("/leads/".concat(e)),updateStatus:(e,t)=>s.put("/leads/".concat(e,"/status"),{status:t}),delete:e=>s.delete("/leads/".concat(e)),exportCSV:()=>s.get("/leads/export/csv",{responseType:"blob"})},u={getAll:()=>s.get("/wishlist"),add:e=>s.post("/wishlist",{property_id:e}),remove:e=>s.delete("/wishlist/".concat(e))},c={getDashboard:()=>s.get("/admin/dashboard"),getUsers:e=>s.get("/admin/users",{params:e}),updateUserStatus:(e,t)=>s.put("/admin/users/".concat(e,"/status"),{is_active:t}),updateUserRole:(e,t)=>s.put("/admin/users/".concat(e,"/role"),{role:t}),deleteUser:e=>s.delete("/admin/users/".concat(e)),getAnalytics:e=>s.get("/admin/analytics",{params:e}),getSettings:()=>s.get("/admin/settings"),updateSettings:e=>s.put("/admin/settings",e)},d={getPublicSettings:()=>s.get("/admin/settings/public")},p={upload:e=>{let t=new FormData;t.append("file",e);let n=e.type.startsWith("video/");return s.post("/media/upload",t,{headers:{"Content-Type":"multipart/form-data"},timeout:n?6e5:3e4,onUploadProgress:e=>{e.total&&(e.loaded,e.total)}})},uploadMultiple:e=>{let t=new FormData;e.forEach(e=>t.append("files",e));let n=e.some(e=>e.type.startsWith("video/"));return s.post("/media/upload/multiple",t,{headers:{"Content-Type":"multipart/form-data"},timeout:n?6e5:3e4})}},m={search:e=>s.get("/locations",{params:{query:e}})},v={getAll:()=>s.get("/drafts"),create:e=>s.post("/drafts",e),update:(e,t)=>s.put("/drafts/".concat(e),t),delete:e=>s.delete("/drafts/".concat(e))},h={getAll:()=>s.get("/amenities"),create:e=>s.post("/amenities",e),update:(e,t)=>s.put("/amenities/".concat(e),t),delete:e=>s.delete("/amenities/".concat(e))}},1217:function(e,t,n){"use strict";n.d(t,{t:function(){return s}});var a=n(59625),i=n(89134);let s=(0,a.Ue)()((0,i.tJ)(e=>({user:null,token:null,isAuthenticated:!1,setAuth:(t,n)=>{localStorage.setItem("token",n),e({user:t,token:n,isAuthenticated:!0})},clearAuth:()=>{localStorage.removeItem("token"),e({user:null,token:null,isAuthenticated:!1})},updateUser:t=>e(e=>({user:e.user?{...e.user,...t}:null}))}),{name:"auth-storage",partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated})}))}},function(e){e.O(0,[655,230,713,883,64,48,971,117,744],function(){return e(e.s=46163)}),_N_E=e.O()}]);