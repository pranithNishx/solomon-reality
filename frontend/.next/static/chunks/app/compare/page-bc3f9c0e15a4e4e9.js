(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[266],{75448:function(e,t,r){Promise.resolve().then(r.bind(r,97371))},99397:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(39763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},27648:function(e,t,r){"use strict";r.d(t,{default:function(){return o.a}});var a=r(72972),o=r.n(a)},99376:function(e,t,r){"use strict";var a=r(35475);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},97371:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var a=r(57437),o=r(2265),n=r(99376),s=r(27648),i=r(11713),l=r(71837),c=r(47309),u=r(15863),d=r(99397),p=r(40521),m=r(69064);function f(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),[r,f]=(0,o.useState)(()=>{let e=t.get("ids");return e?e.split(",").slice(0,4):[]}),{data:h,isLoading:y}=(0,i.a)({queryKey:["compare-properties",r],queryFn:async()=>(await Promise.all(r.map(e=>l.Sf.getById(e)))).map(e=>e.data.property),enabled:r.length>0});return y?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)(u.Z,{className:"animate-spin text-accent-primary",size:32})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-soft p-6",children:(0,a.jsxs)("div",{className:"container mx-auto max-w-7xl",children:[(0,a.jsxs)(p.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-display font-bold text-text-primary mb-2",children:"Compare Properties"}),(0,a.jsx)("p",{className:"text-text-secondary",children:"Compare up to 4 properties side by side"})]}),(h||[]).length>0?(0,a.jsxs)(p.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[(0,a.jsx)(c.j,{propertyIds:r,onClose:()=>e.push("/properties")}),r.length<4&&(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsxs)("button",{onClick:()=>{let t=prompt("Enter property ID to compare:");t&&!r.includes(t)&&r.length<4?(f([...r,t]),e.push("/compare?ids=".concat([...r,t].join(",")))):r.length>=4&&m.ZP.error("You can compare up to 4 properties")},className:"btn-secondary flex items-center gap-2 mx-auto",children:[(0,a.jsx)(d.Z,{size:20}),"Add Another Property"]})})]}):(0,a.jsxs)(p.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card-luxury p-12 text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-display font-bold text-text-primary mb-2",children:"No properties to compare"}),(0,a.jsx)("p",{className:"text-text-secondary mb-6",children:"Add properties from the property listing page to compare them"}),(0,a.jsx)(s.default,{href:"/properties",children:(0,a.jsx)("button",{className:"btn-primary",children:"Browse Properties"})})]})]})})}function h(){return(0,a.jsx)(o.Suspense,{fallback:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)(u.Z,{className:"animate-spin text-accent-primary",size:32})}),children:(0,a.jsx)(f,{})})}},47309:function(e,t,r){"use strict";r.d(t,{j:function(){return m}});var a=r(57437),o=r(2265),n=r(11713),s=r(71837),i=r(93448),l=r(32489),c=r(15863),u=r(55326),d=r(27648),p=r(69064);function m(e){let{propertyIds:t,onClose:r}=e,[m,f]=(0,o.useState)(t),{data:h,isLoading:y,error:g}=(0,n.a)({queryKey:["compare-properties",m],queryFn:async()=>{let e=m.map(e=>s.Sf.getById(e));return(await Promise.all(e)).map(e=>e.data.property)},enabled:m.length>0,retry:1});(0,o.useEffect)(()=>{g&&p.ZP.error("Failed to load properties for comparison")},[g]);let x=h||[],v=e=>{m.length>1?f(m.filter(t=>t!==e)):p.ZP.error("At least one property is required for comparison")};return(0,a.jsx)(u.fC,{open:!0,onOpenChange:r,children:(0,a.jsxs)(u.h_,{children:[(0,a.jsx)(u.aV,{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50"}),(0,a.jsxs)(u.VY,{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-surface border border-border rounded-apple-lg shadow-large z-50 w-[95vw] max-w-7xl max-h-[90vh] overflow-hidden flex flex-col p-0",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-border flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-display font-bold text-accent-primary",children:"Compare Properties"}),(0,a.jsx)(u.x8,{className:"text-text-secondary hover:text-accent-primary transition-colors",children:(0,a.jsx)(l.Z,{size:24})})]}),(0,a.jsx)("div",{className:"flex-1 overflow-auto p-6",children:y?(0,a.jsx)("div",{className:"flex justify-center py-20",children:(0,a.jsx)(c.Z,{className:"animate-spin text-accent-primary",size:40})}):0===x.length?(0,a.jsx)("div",{className:"text-center py-20",children:(0,a.jsx)("p",{className:"text-text-secondary",children:"No properties to compare"})}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full border-collapse",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-border",children:[(0,a.jsx)("th",{className:"p-4 text-left text-accent-primary font-semibold sticky left-0 bg-surface z-10",children:"Property"}),x.map(e=>(0,a.jsxs)("th",{className:"p-4 text-left text-accent-primary font-semibold relative min-w-[200px]",children:[(0,a.jsx)("button",{onClick:()=>v(e.id),className:"absolute top-2 right-2 text-text-secondary hover:text-error transition-colors",children:(0,a.jsx)(l.Z,{size:18})}),(0,a.jsxs)("div",{className:"pr-8",children:[(0,a.jsx)("div",{className:"font-semibold mb-2 line-clamp-2 text-text-primary",children:e.title}),(0,a.jsx)(d.default,{href:"/properties/".concat(e.id),className:"text-sm text-accent-primary hover:underline",children:"View Details →"})]})]},e.id))]})}),(0,a.jsx)("tbody",{children:[{label:"Price",key:"price",format:e=>(0,i.xG)(e.payload.price)},{label:"Area",key:"area",format:e=>{let t=e.payload.area,r="number"==typeof t?t.toLocaleString("en-IN",{maximumFractionDigits:2,minimumFractionDigits:0}):t;return"".concat(r," ").concat(e.payload.areaUnit||"sq.ft")}},{label:"BHK",key:"bhk",format:e=>e.payload.bhk||"N/A"},{label:"Bathrooms",key:"bathrooms",format:e=>e.payload.bathrooms||"N/A"},{label:"Furnishing",key:"furnishing",format:e=>e.payload.furnishing||"N/A"},{label:"Category",key:"category",format:e=>e.payload.category},{label:"Purpose",key:"purpose",format:e=>e.payload.purpose},{label:"Location",key:"location",format:e=>{var t;return(null===(t=e.payload.location)||void 0===t?void 0:t.city)||"N/A"}},{label:"RERA Approved",key:"reraApproved",format:e=>e.payload.reraApproved?"Yes":"No"},{label:"Possession",key:"possessionStatus",format:e=>e.payload.possessionStatus||"N/A"},{label:"Age",key:"ageOfProperty",format:e=>e.payload.ageOfProperty||"N/A"},{label:"Facing",key:"facing",format:e=>e.payload.facing||"N/A"},{label:"Parking",key:"parking",format:e=>e.payload.parking||"N/A"},{label:"Views",key:"views",format:e=>e.views||0}].map(e=>(0,a.jsxs)("tr",{className:"border-b border-border hover:bg-surface-muted transition-colors",children:[(0,a.jsx)("td",{className:"p-4 font-semibold text-text-primary sticky left-0 bg-surface z-10",children:e.label}),x.map(t=>(0,a.jsx)("td",{className:"p-4 text-text-secondary",children:e.format(t)},t.id))]},e.key))})]})})}),(0,a.jsx)("div",{className:"p-6 border-t border-border flex justify-end gap-4",children:(0,a.jsx)(u.x8,{className:"btn-secondary",children:"Close"})})]})]})})}},71837:function(e,t,r){"use strict";r.d(t,{A7:function(){return f},Nq:function(){return u},Sf:function(){return i},WA:function(){return h},XF:function(){return p},YE:function(){return c},fn:function(){return l},iJ:function(){return s},pJ:function(){return d},vt:function(){return m}});var a=r(83464);let o=r(40257).env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api",n=a.Z.create({baseURL:o,headers:{"Content-Type":"application/json"},timeout:1e4,withCredentials:!1});n.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e}),n.interceptors.response.use(e=>e,e=>{var t,r;if((null===(t=e.response)||void 0===t?void 0:t.status)===401){let t=window.location.pathname;if("/"===t||"/properties"===t||t.startsWith("/properties/")||"/login"===t||"/register"===t)return localStorage.removeItem("token"),localStorage.removeItem("auth-storage"),window.dispatchEvent(new Event("storage")),Promise.reject(e);let a=(null===(r=e.config)||void 0===r?void 0:r.url)||"";(a.includes("/auth/")||a.includes("/wishlist")||a.includes("/admin")||a.includes("/profile"))&&(localStorage.removeItem("token"),localStorage.removeItem("auth-storage"),window.dispatchEvent(new Event("storage")),t.includes("/login")||(window.location.href="/login"))}return Promise.reject(e)});let s={register:e=>n.post("/auth/register",e),login:e=>n.post("/auth/login",e),getProfile:()=>n.get("/auth/profile"),updateProfile:e=>n.put("/auth/profile",e),verifyToken:()=>n.get("/auth/verify")},i={getAll:e=>{let t={};return(null==e?void 0:e.page)&&(t.page=e.page),(null==e?void 0:e.limit)&&(t.limit=e.limit),(null==e?void 0:e.status)&&(t.status=e.status),(null==e?void 0:e.search)&&(t.search=e.search),(null==e?void 0:e.category)&&(t.category=e.category),(null==e?void 0:e.purpose)&&(t.purpose=e.purpose),(null==e?void 0:e.subtype)&&(t.subtype=e.subtype),(null==e?void 0:e.minPrice)&&(t.minPrice=e.minPrice),(null==e?void 0:e.maxPrice)&&(t.maxPrice=e.maxPrice),(null==e?void 0:e.minArea)&&(t.minArea=e.minArea),(null==e?void 0:e.maxArea)&&(t.maxArea=e.maxArea),(null==e?void 0:e.bhk)&&(t.bhk=e.bhk),(null==e?void 0:e.bathrooms)&&(t.bathrooms=e.bathrooms),(null==e?void 0:e.furnishing)&&(t.furnishing=e.furnishing),(null==e?void 0:e.availableFor)&&e.availableFor.length>0&&(t.availableFor=e.availableFor),(null==e?void 0:e.availableFrom)&&(t.availableFrom=e.availableFrom),(null==e?void 0:e.constructionStatus)&&(t.constructionStatus=e.constructionStatus),(null==e?void 0:e.investmentType)&&e.investmentType.length>0&&(t.investmentType=e.investmentType),(null==e?void 0:e.powerCapacity)&&(t.powerCapacity=e.powerCapacity),(null==e?void 0:e.meetingRooms)!==void 0&&(t.meetingRooms=e.meetingRooms),(null==e?void 0:e.pantry)!==void 0&&(t.pantry=e.pantry),(null==e?void 0:e.conferenceRoom)!==void 0&&(t.conferenceRoom=e.conferenceRoom),(null==e?void 0:e.cabins)&&(t.cabins=e.cabins),(null==e?void 0:e.washrooms)&&(t.washrooms=e.washrooms),(null==e?void 0:e.floorPreference)&&(t.floorPreference=e.floorPreference),(null==e?void 0:e.locatedOn)&&(t.locatedOn=e.locatedOn),(null==e?void 0:e.officeSpread)&&(t.officeSpread=e.officeSpread),(null==e?void 0:e.situatedIn)&&(t.situatedIn=e.situatedIn),(null==e?void 0:e.businessType)&&e.businessType.length>0&&(t.businessType=e.businessType),(null==e?void 0:e.city)&&(t.city=e.city),(null==e?void 0:e.state)&&(t.state=e.state),(null==e?void 0:e.locality)&&(t.locality=e.locality),(null==e?void 0:e.amenities)&&e.amenities.length>0&&(t.amenities=e.amenities),(null==e?void 0:e.reraApproved)!==void 0&&(t.reraApproved=e.reraApproved),(null==e?void 0:e.ageOfProperty)&&(t.ageOfProperty=e.ageOfProperty),(null==e?void 0:e.possessionStatus)&&(t.possessionStatus=e.possessionStatus),(null==e?void 0:e.facing)&&(t.facing=e.facing),(null==e?void 0:e.parking)&&(t.parking=e.parking),(null==e?void 0:e.sortBy)&&(t.sortBy=e.sortBy),n.get("/properties",{params:t})},getById:e=>n.get("/properties/".concat(e)),create:e=>n.post("/properties",e),update:(e,t)=>n.put("/properties/".concat(e),t),delete:e=>n.delete("/properties/".concat(e)),search:e=>i.getAll({...e,page:e.page,limit:e.limit}),getSimilar:(e,t)=>n.get("/properties/".concat(e,"/similar"),{params:{limit:t}})},l={create:e=>n.post("/leads",e),getAll:e=>n.get("/leads",{params:e}),getById:e=>n.get("/leads/".concat(e)),updateStatus:(e,t)=>n.put("/leads/".concat(e,"/status"),{status:t}),delete:e=>n.delete("/leads/".concat(e)),exportCSV:()=>n.get("/leads/export/csv",{responseType:"blob"})},c={getAll:()=>n.get("/wishlist"),add:e=>n.post("/wishlist",{property_id:e}),remove:e=>n.delete("/wishlist/".concat(e))},u={getDashboard:()=>n.get("/admin/dashboard"),getUsers:e=>n.get("/admin/users",{params:e}),updateUserStatus:(e,t)=>n.put("/admin/users/".concat(e,"/status"),{is_active:t}),updateUserRole:(e,t)=>n.put("/admin/users/".concat(e,"/role"),{role:t}),deleteUser:e=>n.delete("/admin/users/".concat(e)),getAnalytics:e=>n.get("/admin/analytics",{params:e}),getSettings:()=>n.get("/admin/settings"),updateSettings:e=>n.put("/admin/settings",e)},d={getPublicSettings:()=>n.get("/admin/settings/public")},p={upload:e=>{let t=new FormData;t.append("file",e);let r=e.type.startsWith("video/");return n.post("/media/upload",t,{headers:{"Content-Type":"multipart/form-data"},timeout:r?6e5:3e4,onUploadProgress:e=>{e.total&&(e.loaded,e.total)}})},uploadMultiple:e=>{let t=new FormData;e.forEach(e=>t.append("files",e));let r=e.some(e=>e.type.startsWith("video/"));return n.post("/media/upload/multiple",t,{headers:{"Content-Type":"multipart/form-data"},timeout:r?6e5:3e4})}},m={search:e=>n.get("/locations",{params:{query:e}})},f={getAll:()=>n.get("/drafts"),create:e=>n.post("/drafts",e),update:(e,t)=>n.put("/drafts/".concat(e),t),delete:e=>n.delete("/drafts/".concat(e))},h={getAll:()=>n.get("/amenities"),create:e=>n.post("/amenities",e),update:(e,t)=>n.put("/amenities/".concat(e),t),delete:e=>n.delete("/amenities/".concat(e))}},93448:function(e,t,r){"use strict";function a(e){return null==e||isNaN(e)?"₹0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||"string"!=typeof e)return e||"/placeholder-property.jpg";if(!e.includes("ik.imagekit.io"))return e;let{width:r,height:a,quality:o="auto",format:n="auto"}=t,s=[];if(r&&s.push("w-".concat(r)),a&&s.push("h-".concat(a)),o&&s.push("q-".concat(o)),n&&s.push("f-".concat(n)),0===s.length)return"".concat(e,"?tr=f-auto,q-auto");let i=e.includes("?")?"&":"?";return"".concat(e).concat(i,"tr=").concat(s.join(","))}function s(e){return n(e,{width:600,quality:"auto",format:"auto"})}function i(e){return n(e,{width:1200,quality:"auto",format:"auto"})}r.d(t,{Km:function(){return s},cn:function(){return o},kC:function(){return i},w1:function(){return n},xG:function(){return a}})}},function(e){e.O(0,[655,972,230,713,64,258,971,117,744],function(){return e(e.s=75448)}),_N_E=e.O()}]);