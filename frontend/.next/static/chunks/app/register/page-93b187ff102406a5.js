(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{62869:function(e,t,a){Promise.resolve().then(a.bind(a,30564))},27648:function(e,t,a){"use strict";a.d(t,{default:function(){return r.a}});var s=a(72972),r=a.n(s)},30564:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var s=a(57437),r=a(99376),n=a(29501),i=a(21770),o=a(71837),l=a(27648),d=a(69064);function c(){let e=(0,r.useRouter)(),{register:t,handleSubmit:a,formState:{errors:c},watch:u}=(0,n.cI)(),m=u("password"),p=(0,i.D)({mutationFn:e=>o.iJ.register(e),onSuccess:()=>{d.ZP.success("Registration successful!"),e.push("/login")},onError:e=>{var t,a,s,r;if((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.errors)&&Array.isArray(e.response.data.errors)){let t=e.response.data.errors.map(e=>e.msg).join(", ");d.ZP.error(t||"Validation failed")}else(null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.error)?d.ZP.error(e.response.data.error):e.message?d.ZP.error(e.message):d.ZP.error("Registration failed. Please check your connection and try again.")}});return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-soft flex items-center justify-center py-12 px-4",children:(0,s.jsx)("div",{className:"w-full max-w-md",children:(0,s.jsxs)("div",{className:"card-luxury",children:[(0,s.jsxs)("h1",{className:"text-3xl font-display font-bold text-center mb-2",children:[(0,s.jsx)("span",{className:"text-gradient",children:"Create"})," ",(0,s.jsx)("span",{className:"text-text-primary",children:"Account"})]}),(0,s.jsx)("p",{className:"text-center text-text-secondary mb-8",children:"Join Covenant Realty to find your dream property"}),(0,s.jsxs)("form",{onSubmit:a(e=>{if(e.password!==e.confirmPassword){d.ZP.error("Passwords do not match");return}let{confirmPassword:t,...a}=e;p.mutate(a)}),className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Name"}),(0,s.jsx)("input",{type:"text",...t("name",{required:"Name is required",minLength:{value:2,message:"Name must be at least 2 characters"}}),className:"input-elegant w-full",placeholder:"Your full name"}),c.name&&(0,s.jsx)("p",{className:"text-error text-sm mt-1",children:c.name.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Email"}),(0,s.jsx)("input",{type:"email",...t("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),className:"input-elegant w-full",placeholder:"your.email@example.com"}),c.email&&(0,s.jsx)("p",{className:"text-error text-sm mt-1",children:c.email.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Phone (Optional)"}),(0,s.jsx)("input",{type:"tel",...t("phone",{pattern:{value:/^[+]?[(]?[0-9]{1,4}[)]?[-\s.]?[(]?[0-9]{1,4}[)]?[-\s.]?[0-9]{1,9}$/,message:"Invalid phone number"}}),className:"input-elegant w-full",placeholder:"+91 123 456 7890"}),c.phone&&(0,s.jsx)("p",{className:"text-error text-sm mt-1",children:c.phone.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Password"}),(0,s.jsx)("input",{type:"password",...t("password",{required:"Password is required",minLength:{value:8,message:"Password must be at least 8 characters"},pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,message:"Password must contain uppercase, lowercase, and number"}}),className:"input-elegant w-full",placeholder:"Create a strong password"}),c.password&&(0,s.jsx)("p",{className:"text-error text-sm mt-1",children:c.password.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold mb-2 text-text-primary",children:"Confirm Password"}),(0,s.jsx)("input",{type:"password",...t("confirmPassword",{required:"Please confirm your password",validate:e=>e===m||"Passwords do not match"}),className:"input-elegant w-full",placeholder:"Confirm your password"}),c.confirmPassword&&(0,s.jsx)("p",{className:"text-error text-sm mt-1",children:c.confirmPassword.message})]}),(0,s.jsx)("button",{type:"submit",disabled:p.isPending,className:"btn-primary w-full",children:p.isPending?"Creating account...":"Create Account"})]}),(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsxs)("p",{className:"text-text-secondary text-sm",children:["Already have an account?"," ",(0,s.jsx)(l.default,{href:"/login",className:"text-accent-primary hover:text-accent-primary-hover hover:underline font-semibold transition-colors",children:"Login"})]})})]})})})}},71837:function(e,t,a){"use strict";a.d(t,{A7:function(){return g},Nq:function(){return c},Sf:function(){return o},WA:function(){return v},XF:function(){return m},YE:function(){return d},fn:function(){return l},iJ:function(){return i},pJ:function(){return u},vt:function(){return p}});var s=a(83464);let r=a(40257).env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api",n=s.Z.create({baseURL:r,headers:{"Content-Type":"application/json"},timeout:1e4,withCredentials:!1});n.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e}),n.interceptors.response.use(e=>e,e=>{var t,a;if((null===(t=e.response)||void 0===t?void 0:t.status)===401){let t=window.location.pathname;if("/"===t||"/properties"===t||t.startsWith("/properties/")||"/login"===t||"/register"===t)return localStorage.removeItem("token"),localStorage.removeItem("auth-storage"),window.dispatchEvent(new Event("storage")),Promise.reject(e);let s=(null===(a=e.config)||void 0===a?void 0:a.url)||"";(s.includes("/auth/")||s.includes("/wishlist")||s.includes("/admin")||s.includes("/profile"))&&(localStorage.removeItem("token"),localStorage.removeItem("auth-storage"),window.dispatchEvent(new Event("storage")),t.includes("/login")||(window.location.href="/login"))}return Promise.reject(e)});let i={register:e=>n.post("/auth/register",e),login:e=>n.post("/auth/login",e),getProfile:()=>n.get("/auth/profile"),updateProfile:e=>n.put("/auth/profile",e),verifyToken:()=>n.get("/auth/verify")},o={getAll:e=>{let t={};return(null==e?void 0:e.page)&&(t.page=e.page),(null==e?void 0:e.limit)&&(t.limit=e.limit),(null==e?void 0:e.status)&&(t.status=e.status),(null==e?void 0:e.search)&&(t.search=e.search),(null==e?void 0:e.category)&&(t.category=e.category),(null==e?void 0:e.purpose)&&(t.purpose=e.purpose),(null==e?void 0:e.subtype)&&(t.subtype=e.subtype),(null==e?void 0:e.minPrice)&&(t.minPrice=e.minPrice),(null==e?void 0:e.maxPrice)&&(t.maxPrice=e.maxPrice),(null==e?void 0:e.minArea)&&(t.minArea=e.minArea),(null==e?void 0:e.maxArea)&&(t.maxArea=e.maxArea),(null==e?void 0:e.bhk)&&(t.bhk=e.bhk),(null==e?void 0:e.bathrooms)&&(t.bathrooms=e.bathrooms),(null==e?void 0:e.furnishing)&&(t.furnishing=e.furnishing),(null==e?void 0:e.availableFor)&&e.availableFor.length>0&&(t.availableFor=e.availableFor),(null==e?void 0:e.availableFrom)&&(t.availableFrom=e.availableFrom),(null==e?void 0:e.constructionStatus)&&(t.constructionStatus=e.constructionStatus),(null==e?void 0:e.investmentType)&&e.investmentType.length>0&&(t.investmentType=e.investmentType),(null==e?void 0:e.powerCapacity)&&(t.powerCapacity=e.powerCapacity),(null==e?void 0:e.meetingRooms)!==void 0&&(t.meetingRooms=e.meetingRooms),(null==e?void 0:e.pantry)!==void 0&&(t.pantry=e.pantry),(null==e?void 0:e.conferenceRoom)!==void 0&&(t.conferenceRoom=e.conferenceRoom),(null==e?void 0:e.cabins)&&(t.cabins=e.cabins),(null==e?void 0:e.washrooms)&&(t.washrooms=e.washrooms),(null==e?void 0:e.floorPreference)&&(t.floorPreference=e.floorPreference),(null==e?void 0:e.locatedOn)&&(t.locatedOn=e.locatedOn),(null==e?void 0:e.officeSpread)&&(t.officeSpread=e.officeSpread),(null==e?void 0:e.situatedIn)&&(t.situatedIn=e.situatedIn),(null==e?void 0:e.businessType)&&e.businessType.length>0&&(t.businessType=e.businessType),(null==e?void 0:e.city)&&(t.city=e.city),(null==e?void 0:e.state)&&(t.state=e.state),(null==e?void 0:e.locality)&&(t.locality=e.locality),(null==e?void 0:e.amenities)&&e.amenities.length>0&&(t.amenities=e.amenities),(null==e?void 0:e.reraApproved)!==void 0&&(t.reraApproved=e.reraApproved),(null==e?void 0:e.ageOfProperty)&&(t.ageOfProperty=e.ageOfProperty),(null==e?void 0:e.possessionStatus)&&(t.possessionStatus=e.possessionStatus),(null==e?void 0:e.facing)&&(t.facing=e.facing),(null==e?void 0:e.parking)&&(t.parking=e.parking),(null==e?void 0:e.sortBy)&&(t.sortBy=e.sortBy),n.get("/properties",{params:t})},getById:e=>n.get("/properties/".concat(e)),create:e=>n.post("/properties",e),update:(e,t)=>n.put("/properties/".concat(e),t),delete:e=>n.delete("/properties/".concat(e)),search:e=>o.getAll({...e,page:e.page,limit:e.limit}),getSimilar:(e,t)=>n.get("/properties/".concat(e,"/similar"),{params:{limit:t}})},l={create:e=>n.post("/leads",e),getAll:e=>n.get("/leads",{params:e}),getById:e=>n.get("/leads/".concat(e)),updateStatus:(e,t)=>n.put("/leads/".concat(e,"/status"),{status:t}),delete:e=>n.delete("/leads/".concat(e)),exportCSV:()=>n.get("/leads/export/csv",{responseType:"blob"})},d={getAll:()=>n.get("/wishlist"),add:e=>n.post("/wishlist",{property_id:e}),remove:e=>n.delete("/wishlist/".concat(e))},c={getDashboard:()=>n.get("/admin/dashboard"),getUsers:e=>n.get("/admin/users",{params:e}),updateUserStatus:(e,t)=>n.put("/admin/users/".concat(e,"/status"),{is_active:t}),updateUserRole:(e,t)=>n.put("/admin/users/".concat(e,"/role"),{role:t}),deleteUser:e=>n.delete("/admin/users/".concat(e)),getAnalytics:e=>n.get("/admin/analytics",{params:e}),getSettings:()=>n.get("/admin/settings"),updateSettings:e=>n.put("/admin/settings",e)},u={getPublicSettings:()=>n.get("/admin/settings/public")},m={upload:e=>{let t=new FormData;t.append("file",e);let a=e.type.startsWith("video/");return n.post("/media/upload",t,{headers:{"Content-Type":"multipart/form-data"},timeout:a?6e5:3e4,onUploadProgress:e=>{e.total&&(e.loaded,e.total)}})},uploadMultiple:e=>{let t=new FormData;e.forEach(e=>t.append("files",e));let a=e.some(e=>e.type.startsWith("video/"));return n.post("/media/upload/multiple",t,{headers:{"Content-Type":"multipart/form-data"},timeout:a?6e5:3e4})}},p={search:e=>n.get("/locations",{params:{query:e}})},g={getAll:()=>n.get("/drafts"),create:e=>n.post("/drafts",e),update:(e,t)=>n.put("/drafts/".concat(e),t),delete:e=>n.delete("/drafts/".concat(e))},v={getAll:()=>n.get("/amenities"),create:e=>n.post("/amenities",e),update:(e,t)=>n.put("/amenities/".concat(e),t),delete:e=>n.delete("/amenities/".concat(e))}}},function(e){e.O(0,[655,972,64,48,971,117,744],function(){return e(e.s=62869)}),_N_E=e.O()}]);