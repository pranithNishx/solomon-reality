"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[906],{64906:function(e,t,a){a.d(t,{J:function(){return b}});var i=a(57437),r=a(27648),o=a(33145),n=a(40521),s=a(88997),l=a(29374),c=a(83774),u=a(91128),d=a(43299),p=a(61094),m=a(93448),h=a(1217),v=a(71837),f=a(29827),g=a(21770),x=a(69064),y=a(2265);let b=(0,y.memo)(function(e){var t,a;let{property:b,isWishlisted:w}=e,{isAuthenticated:j}=(0,h.t)(),N=(0,f.NL)(),[A,k]=(0,y.useState)(w||!1),S="string"==typeof b.payload?JSON.parse(b.payload):b.payload,P=S.images||[],I=Array.isArray(P)&&P.length>0?"string"==typeof P[0]?P[0]:P[0].url||P[0].secure_url:null,C=(0,m.Km)(I),F=S.videos&&Array.isArray(S.videos)&&S.videos.length>0,T=(0,g.D)({mutationFn:async()=>{A?await v.YE.remove(b.id):await v.YE.add(b.id)},onSuccess:()=>{k(!A),N.invalidateQueries({queryKey:["wishlist"]}),x.ZP.success(A?"Removed from wishlist":"Added to wishlist")},onError:e=>{var t,a;x.ZP.error((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.error)||"Failed to update wishlist")}});return(0,i.jsx)(n.E.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},whileHover:{y:-4,scale:1.02},transition:{duration:.3,ease:[.22,.9,.38,1]},className:"bg-surface border border-border rounded-lg overflow-hidden group shadow-[0_4px_20px_rgba(0,0,0,0.05)] hover:shadow-large transition-all duration-200 ease-in-out",children:(0,i.jsxs)(r.default,{href:"/properties/".concat(b.id),prefetch:!0,children:[(0,i.jsxs)("div",{className:"relative w-full aspect-[4/3] overflow-hidden bg-surface-muted",children:[(0,i.jsx)(o.default,{src:C,alt:b.title,fill:!0,className:"object-cover transition-transform duration-700 group-hover:scale-110",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",loading:"lazy"}),(0,i.jsx)("button",{onClick:e=>{if(e.preventDefault(),e.stopPropagation(),!j){x.ZP.error("Login to save properties to wishlist.");let e=window.location.pathname;window.location.href="/login?redirect=".concat(encodeURIComponent(e));return}T.mutate()},className:"absolute top-4 right-4 p-2.5 bg-white/95 backdrop-blur-md rounded-full hover:bg-white transition-all duration-200 shadow-medium hover:shadow-large z-10","aria-label":A?"Remove from wishlist":"Add to wishlist",children:(0,i.jsx)(s.Z,{size:20,className:A?"fill-accent-primary text-accent-primary":"text-text-secondary"})}),(0,i.jsx)("div",{className:"absolute bottom-4 left-4 bg-gradient-primary text-white px-4 py-2 rounded-pill font-semibold text-sm shadow-medium",children:S.purpose||"Buy"}),F&&(0,i.jsxs)("div",{className:"absolute top-4 left-4 bg-black/70 backdrop-blur-md text-white px-3 py-1.5 rounded-pill font-semibold text-xs shadow-medium flex items-center gap-1.5",children:[(0,i.jsx)(l.Z,{size:14,className:"fill-white"}),(0,i.jsx)("span",{children:"Video"})]})]}),(0,i.jsxs)("div",{className:"p-4 flex-1 flex flex-col",children:[(0,i.jsx)("h3",{className:"text-xl font-display font-bold mb-3 line-clamp-2 min-h-[3rem] text-text-primary group-hover:text-accent-primary transition-colors",children:b.title}),(0,i.jsx)("div",{className:"text-2xl font-bold text-accent-primary mb-4",children:(0,m.xG)(S.price)}),(0,i.jsxs)("div",{className:"flex items-center text-text-secondary mb-4",children:[(0,i.jsx)(c.Z,{size:16,className:"mr-2 text-accent-primary flex-shrink-0"}),(0,i.jsx)("span",{className:"text-sm truncate",children:(null===(t=S.location)||void 0===t?void 0:t.locality)||(null===(a=S.location)||void 0===a?void 0:a.city)||"Location not specified"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-4 text-text-secondary text-sm mb-4 flex-wrap",children:[S.bhk&&(0,i.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,i.jsx)(u.Z,{size:16,className:"text-accent-primary"}),(0,i.jsx)("span",{children:S.bhk})]}),S.bathrooms&&(0,i.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,i.jsx)(d.Z,{size:16,className:"text-accent-primary"}),(0,i.jsxs)("span",{children:[S.bathrooms," Bath"]})]}),S.area&&(0,i.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,i.jsx)(p.Z,{size:16,className:"text-accent-primary"}),(0,i.jsxs)("span",{children:["number"==typeof S.area?S.area.toLocaleString("en-IN",{maximumFractionDigits:0}):S.area," ",S.areaUnit||"sq.ft"]})]}),"Commercial"===S.category&&S.powerCapacity&&(0,i.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,i.jsx)("span",{className:"text-accent-primary",children:"⚡"}),(0,i.jsx)("span",{children:S.powerCapacity})]})]}),(0,i.jsx)("div",{className:"mt-auto pt-4 border-t border-border",children:(0,i.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,i.jsxs)("span",{className:"text-text-secondary",children:[b.views||0," views"]}),(0,i.jsx)("span",{className:"text-accent-primary font-semibold group-hover:text-accent-primary-hover transition-colors",children:"View Details →"})]})})]})]})})})},71837:function(e,t,a){a.d(t,{A7:function(){return h},Nq:function(){return u},Sf:function(){return s},WA:function(){return v},XF:function(){return p},YE:function(){return c},fn:function(){return l},iJ:function(){return n},pJ:function(){return d},vt:function(){return m}});var i=a(83464);let r=a(40257).env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api",o=i.Z.create({baseURL:r,headers:{"Content-Type":"application/json"},timeout:1e4,withCredentials:!1});o.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e}),o.interceptors.response.use(e=>e,e=>{var t,a;if((null===(t=e.response)||void 0===t?void 0:t.status)===401){let t=window.location.pathname;if("/"===t||"/properties"===t||t.startsWith("/properties/")||"/login"===t||"/register"===t)return localStorage.removeItem("token"),localStorage.removeItem("auth-storage"),window.dispatchEvent(new Event("storage")),Promise.reject(e);let i=(null===(a=e.config)||void 0===a?void 0:a.url)||"";(i.includes("/auth/")||i.includes("/wishlist")||i.includes("/admin")||i.includes("/profile"))&&(localStorage.removeItem("token"),localStorage.removeItem("auth-storage"),window.dispatchEvent(new Event("storage")),t.includes("/login")||(window.location.href="/login"))}return Promise.reject(e)});let n={register:e=>o.post("/auth/register",e),login:e=>o.post("/auth/login",e),getProfile:()=>o.get("/auth/profile"),updateProfile:e=>o.put("/auth/profile",e),verifyToken:()=>o.get("/auth/verify")},s={getAll:e=>{let t={};return(null==e?void 0:e.page)&&(t.page=e.page),(null==e?void 0:e.limit)&&(t.limit=e.limit),(null==e?void 0:e.status)&&(t.status=e.status),(null==e?void 0:e.search)&&(t.search=e.search),(null==e?void 0:e.category)&&(t.category=e.category),(null==e?void 0:e.purpose)&&(t.purpose=e.purpose),(null==e?void 0:e.subtype)&&(t.subtype=e.subtype),(null==e?void 0:e.minPrice)&&(t.minPrice=e.minPrice),(null==e?void 0:e.maxPrice)&&(t.maxPrice=e.maxPrice),(null==e?void 0:e.minArea)&&(t.minArea=e.minArea),(null==e?void 0:e.maxArea)&&(t.maxArea=e.maxArea),(null==e?void 0:e.bhk)&&(t.bhk=e.bhk),(null==e?void 0:e.bathrooms)&&(t.bathrooms=e.bathrooms),(null==e?void 0:e.furnishing)&&(t.furnishing=e.furnishing),(null==e?void 0:e.availableFor)&&e.availableFor.length>0&&(t.availableFor=e.availableFor),(null==e?void 0:e.availableFrom)&&(t.availableFrom=e.availableFrom),(null==e?void 0:e.constructionStatus)&&(t.constructionStatus=e.constructionStatus),(null==e?void 0:e.investmentType)&&e.investmentType.length>0&&(t.investmentType=e.investmentType),(null==e?void 0:e.powerCapacity)&&(t.powerCapacity=e.powerCapacity),(null==e?void 0:e.meetingRooms)!==void 0&&(t.meetingRooms=e.meetingRooms),(null==e?void 0:e.pantry)!==void 0&&(t.pantry=e.pantry),(null==e?void 0:e.conferenceRoom)!==void 0&&(t.conferenceRoom=e.conferenceRoom),(null==e?void 0:e.cabins)&&(t.cabins=e.cabins),(null==e?void 0:e.washrooms)&&(t.washrooms=e.washrooms),(null==e?void 0:e.floorPreference)&&(t.floorPreference=e.floorPreference),(null==e?void 0:e.locatedOn)&&(t.locatedOn=e.locatedOn),(null==e?void 0:e.officeSpread)&&(t.officeSpread=e.officeSpread),(null==e?void 0:e.situatedIn)&&(t.situatedIn=e.situatedIn),(null==e?void 0:e.businessType)&&e.businessType.length>0&&(t.businessType=e.businessType),(null==e?void 0:e.city)&&(t.city=e.city),(null==e?void 0:e.state)&&(t.state=e.state),(null==e?void 0:e.locality)&&(t.locality=e.locality),(null==e?void 0:e.amenities)&&e.amenities.length>0&&(t.amenities=e.amenities),(null==e?void 0:e.reraApproved)!==void 0&&(t.reraApproved=e.reraApproved),(null==e?void 0:e.ageOfProperty)&&(t.ageOfProperty=e.ageOfProperty),(null==e?void 0:e.possessionStatus)&&(t.possessionStatus=e.possessionStatus),(null==e?void 0:e.facing)&&(t.facing=e.facing),(null==e?void 0:e.parking)&&(t.parking=e.parking),(null==e?void 0:e.sortBy)&&(t.sortBy=e.sortBy),o.get("/properties",{params:t})},getById:e=>o.get("/properties/".concat(e)),create:e=>o.post("/properties",e),update:(e,t)=>o.put("/properties/".concat(e),t),delete:e=>o.delete("/properties/".concat(e)),search:e=>s.getAll({...e,page:e.page,limit:e.limit}),getSimilar:(e,t)=>o.get("/properties/".concat(e,"/similar"),{params:{limit:t}})},l={create:e=>o.post("/leads",e),getAll:e=>o.get("/leads",{params:e}),getById:e=>o.get("/leads/".concat(e)),updateStatus:(e,t)=>o.put("/leads/".concat(e,"/status"),{status:t}),delete:e=>o.delete("/leads/".concat(e)),exportCSV:()=>o.get("/leads/export/csv",{responseType:"blob"})},c={getAll:()=>o.get("/wishlist"),add:e=>o.post("/wishlist",{property_id:e}),remove:e=>o.delete("/wishlist/".concat(e))},u={getDashboard:()=>o.get("/admin/dashboard"),getUsers:e=>o.get("/admin/users",{params:e}),updateUserStatus:(e,t)=>o.put("/admin/users/".concat(e,"/status"),{is_active:t}),updateUserRole:(e,t)=>o.put("/admin/users/".concat(e,"/role"),{role:t}),deleteUser:e=>o.delete("/admin/users/".concat(e)),getAnalytics:e=>o.get("/admin/analytics",{params:e}),getSettings:()=>o.get("/admin/settings"),updateSettings:e=>o.put("/admin/settings",e)},d={getPublicSettings:()=>o.get("/admin/settings/public")},p={upload:e=>{let t=new FormData;t.append("file",e);let a=e.type.startsWith("video/");return o.post("/media/upload",t,{headers:{"Content-Type":"multipart/form-data"},timeout:a?6e5:3e4,onUploadProgress:e=>{e.total&&(e.loaded,e.total)}})},uploadMultiple:e=>{let t=new FormData;e.forEach(e=>t.append("files",e));let a=e.some(e=>e.type.startsWith("video/"));return o.post("/media/upload/multiple",t,{headers:{"Content-Type":"multipart/form-data"},timeout:a?6e5:3e4})}},m={search:e=>o.get("/locations",{params:{query:e}})},h={getAll:()=>o.get("/drafts"),create:e=>o.post("/drafts",e),update:(e,t)=>o.put("/drafts/".concat(e),t),delete:e=>o.delete("/drafts/".concat(e))},v={getAll:()=>o.get("/amenities"),create:e=>o.post("/amenities",e),update:(e,t)=>o.put("/amenities/".concat(e),t),delete:e=>o.delete("/amenities/".concat(e))}},93448:function(e,t,a){function i(e){return null==e||isNaN(e)?"₹0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter(Boolean).join(" ")}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||"string"!=typeof e)return e||"/placeholder-property.jpg";if(!e.includes("ik.imagekit.io"))return e;let{width:a,height:i,quality:r="auto",format:o="auto"}=t,n=[];if(a&&n.push("w-".concat(a)),i&&n.push("h-".concat(i)),r&&n.push("q-".concat(r)),o&&n.push("f-".concat(o)),0===n.length)return"".concat(e,"?tr=f-auto,q-auto");let s=e.includes("?")?"&":"?";return"".concat(e).concat(s,"tr=").concat(n.join(","))}function n(e){return o(e,{width:600,quality:"auto",format:"auto"})}function s(e){return o(e,{width:1200,quality:"auto",format:"auto"})}a.d(t,{Km:function(){return n},cn:function(){return r},kC:function(){return s},w1:function(){return o},xG:function(){return i}})},1217:function(e,t,a){a.d(t,{t:function(){return o}});var i=a(59625),r=a(89134);let o=(0,i.Ue)()((0,r.tJ)(e=>({user:null,token:null,isAuthenticated:!1,setAuth:(t,a)=>{localStorage.setItem("token",a),e({user:t,token:a,isAuthenticated:!0})},clearAuth:()=>{localStorage.removeItem("token"),e({user:null,token:null,isAuthenticated:!1})},updateUser:t=>e(e=>({user:e.user?{...e.user,...t}:null}))}),{name:"auth-storage",partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated})}))}}]);