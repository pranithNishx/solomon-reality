"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[53],{25053:function(e,t,i){i.d(t,{w:function(){return w}});var n=i(57437),a=i(2265),r=i(27648),s=i(33145),o=i(99376),l=i(1217),c=i(11713),u=i(71837),d=i(99637),p=i(73247),m=i(88997),h=i(98728),f=i(92369),g=i(47692),x=i(32489),v=i(58293),y=i(40521),b=i(48614),j=i(56334);function w(){var e;let t=(0,o.usePathname)(),{user:i,isAuthenticated:w,clearAuth:C}=(0,l.t)(),z=(null==i?void 0:i.role)==="admin",[A,S]=(0,a.useState)(!1),[F,P]=(0,a.useState)(!1),{data:E}=(0,c.a)({queryKey:["site-settings"],queryFn:async()=>{try{return(await u.pJ.getPublicSettings()).data}catch(e){return{settings:{}}}},staleTime:3e5,retry:1}),T=null==E?void 0:null===(e=E.settings)||void 0===e?void 0:e.logo;(0,a.useEffect)(()=>{let e=()=>{S(window.scrollY>20)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);let I=()=>{C(),window.location.href="/login"},Z="/"===t;return(0,n.jsxs)(y.E.nav,{initial:!1,animate:{backgroundColor:A||!Z?"#FFFFFF":"rgba(255, 255, 255, 0.8)",backdropFilter:A||!Z?"none":"blur(20px)",borderBottomColor:A||!Z?"#E5E7EB":"rgba(229, 231, 235, 0.5)"},transition:{duration:.3,ease:[.22,.9,.38,1]},className:"sticky top-0 z-50 border-b transition-all duration-300",children:[(0,n.jsx)("div",{className:"max-w-[1280px] mx-auto px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"flex items-center justify-between h-16 md:h-20",children:[(0,n.jsx)(r.default,{href:"/",className:"flex items-center space-x-2",children:(0,n.jsx)(y.E.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center",children:T?(0,n.jsx)("div",{className:"relative h-14 md:h-16 w-auto max-w-[280px] md:max-w-[320px] min-w-[160px] md:min-w-[180px]",children:(0,n.jsx)(s.default,{src:T,alt:"Company Logo",width:320,height:64,className:"object-contain h-14 md:h-16 w-auto",sizes:"(max-width: 768px) 200px, 320px",priority:!0})}):(0,n.jsx)("h1",{className:"text-2xl md:text-3xl font-display font-bold text-accent-primary",children:"Covenant Realty"})})}),(0,n.jsxs)("div",{className:"hidden md:flex items-center space-x-1",children:[(0,n.jsx)(k,{href:"/",icon:(0,n.jsx)(d.Z,{size:18}),label:"Home",pathname:t}),(0,n.jsx)(k,{href:"/properties",icon:(0,n.jsx)(p.Z,{size:18}),label:"Properties",pathname:t}),w?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(k,{href:"/wishlist",icon:(0,n.jsx)(m.Z,{size:18}),label:"Wishlist",pathname:t}),z&&(0,n.jsx)(k,{href:"/admin",icon:(0,n.jsx)(h.Z,{size:18}),label:"Admin",pathname:t}),(0,n.jsx)(k,{href:"/profile",icon:(0,n.jsx)(f.Z,{size:18}),label:(null==i?void 0:i.name)||"Profile",pathname:t}),(0,n.jsxs)(j.z,{variant:"ghost",onClick:I,size:"sm",children:[(0,n.jsx)(g.Z,{size:18,className:"mr-2"}),"Logout"]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.default,{href:"/login",className:"px-4 py-2 text-text-secondary hover:text-text-primary transition-colors",children:"Login"}),(0,n.jsx)(j.z,{variant:"primary",size:"sm",href:"/register",children:"Register"})]})]}),(0,n.jsx)("div",{className:"md:hidden",children:(0,n.jsx)("button",{onClick:()=>P(!F),className:"p-2 rounded-apple text-text-primary hover:bg-surface-muted transition-colors","aria-label":"Toggle menu",children:F?(0,n.jsx)(x.Z,{size:24}):(0,n.jsx)(v.Z,{size:24})})})]})}),(0,n.jsx)(b.M,{children:F&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>P(!1),className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 md:hidden"}),(0,n.jsx)(y.E.div,{initial:{y:"-100%"},animate:{y:0},exit:{y:"-100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed top-0 left-0 right-0 bg-surface border-b border-border shadow-large z-50 md:hidden",children:(0,n.jsxs)("div",{className:"container mx-auto px-4 py-6 space-y-2",children:[(0,n.jsx)(N,{href:"/",icon:(0,n.jsx)(d.Z,{size:20}),label:"Home",pathname:t,onClick:()=>P(!1)}),(0,n.jsx)(N,{href:"/properties",icon:(0,n.jsx)(p.Z,{size:20}),label:"Properties",pathname:t,onClick:()=>P(!1)}),w?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N,{href:"/wishlist",icon:(0,n.jsx)(m.Z,{size:20}),label:"Wishlist",pathname:t,onClick:()=>P(!1)}),z&&(0,n.jsx)(N,{href:"/admin",icon:(0,n.jsx)(h.Z,{size:20}),label:"Admin",pathname:t,onClick:()=>P(!1)}),(0,n.jsx)(N,{href:"/profile",icon:(0,n.jsx)(f.Z,{size:20}),label:(null==i?void 0:i.name)||"Profile",pathname:t,onClick:()=>P(!1)}),(0,n.jsxs)("button",{onClick:()=>{I(),P(!1)},className:"w-full flex items-center space-x-3 px-4 py-3 rounded-apple text-error hover:bg-surface-muted transition-colors",children:[(0,n.jsx)(g.Z,{size:20}),(0,n.jsx)("span",{children:"Logout"})]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.default,{href:"/login",onClick:()=>P(!1),className:"flex items-center space-x-3 px-4 py-3 rounded-apple text-text-secondary hover:bg-surface-muted transition-colors",children:(0,n.jsx)("span",{children:"Login"})}),(0,n.jsx)(j.z,{variant:"primary",className:"w-full",href:"/register",onClick:()=>P(!1),children:"Register"})]})]})})]})})]})}function k(e){let{href:t,icon:i,label:a,pathname:s}=e,o=s===t||"/"!==t&&(null==s?void 0:s.startsWith(t));return(0,n.jsxs)(r.default,{href:t,className:"relative px-4 py-2 rounded-apple transition-colors group",children:[(0,n.jsxs)("span",{className:"relative z-10 flex items-center gap-2 ".concat(o?"text-accent-primary font-semibold":"text-text-secondary hover:text-text-primary"),children:[i,a]}),o&&(0,n.jsx)(y.E.div,{layoutId:"activeTab",className:"absolute inset-0 bg-accent-primary/10 rounded-apple",initial:!1,transition:{type:"spring",stiffness:500,damping:30}})]})}function N(e){let{href:t,icon:i,label:a,pathname:s,onClick:o}=e,l=s===t||"/"!==t&&(null==s?void 0:s.startsWith(t));return(0,n.jsxs)(r.default,{href:t,onClick:o,className:"flex items-center space-x-3 px-4 py-3 rounded-apple transition-colors ".concat(l?"bg-accent-primary/10 text-accent-primary font-semibold":"text-text-secondary hover:bg-surface-muted"),children:[i,(0,n.jsx)("span",{children:a})]})}},56334:function(e,t,i){i.d(t,{z:function(){return l}});var n=i(57437),a=i(2265),r=i(27648),s=i(40521),o=i(93448);let l=(0,a.forwardRef)((e,t)=>{let{className:i,variant:a="primary",size:l="md",isLoading:c,disabled:u,children:d,href:p,...m}=e,h=(0,o.cn)("inline-flex items-center justify-center font-semibold transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-accent-primary focus:ring-offset-2",{primary:"btn-primary",secondary:"btn-secondary",outline:"btn-outline",ghost:"btn-ghost"}[a],{sm:"px-4 py-2 text-sm rounded-pill",md:"px-6 py-3 text-base rounded-pill",lg:"px-8 py-4 text-lg rounded-pill"}[l],i),f={whileHover:u||c?{}:{scale:1.03},whileTap:u||c?{}:{scale:.97},transition:{type:"spring",stiffness:400,damping:17},style:{transitionTimingFunction:"cubic-bezier(0.22, 0.9, 0.38, 1)"}};if(p){let e=c?(0,n.jsxs)("span",{className:"flex items-center gap-2",children:[(0,n.jsxs)("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):d;return(0,n.jsx)(s.E.div,{...f,children:(0,n.jsx)(r.default,{href:p,className:h,...m,children:e})})}let{onDrag:g,onDragEnd:x,onDragStart:v,onAnimationStart:y,onAnimationEnd:b,...j}=m;return(0,n.jsx)(s.E.button,{ref:t,className:h,disabled:u||c,...f,...j,children:c?(0,n.jsxs)("span",{className:"flex items-center gap-2",children:[(0,n.jsxs)("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):d})});l.displayName="Button"},71837:function(e,t,i){i.d(t,{A7:function(){return h},Nq:function(){return u},Sf:function(){return o},WA:function(){return f},XF:function(){return p},YE:function(){return c},fn:function(){return l},iJ:function(){return s},pJ:function(){return d},vt:function(){return m}});var n=i(83464);let a=i(40257).env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api",r=n.Z.create({baseURL:a,headers:{"Content-Type":"application/json"},timeout:1e4,withCredentials:!1});r.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e}),r.interceptors.response.use(e=>e,e=>{var t,i;if((null===(t=e.response)||void 0===t?void 0:t.status)===401){let t=window.location.pathname;if("/"===t||"/properties"===t||t.startsWith("/properties/")||"/login"===t||"/register"===t)return localStorage.removeItem("token"),localStorage.removeItem("auth-storage"),window.dispatchEvent(new Event("storage")),Promise.reject(e);let n=(null===(i=e.config)||void 0===i?void 0:i.url)||"";(n.includes("/auth/")||n.includes("/wishlist")||n.includes("/admin")||n.includes("/profile"))&&(localStorage.removeItem("token"),localStorage.removeItem("auth-storage"),window.dispatchEvent(new Event("storage")),t.includes("/login")||(window.location.href="/login"))}return Promise.reject(e)});let s={register:e=>r.post("/auth/register",e),login:e=>r.post("/auth/login",e),getProfile:()=>r.get("/auth/profile"),updateProfile:e=>r.put("/auth/profile",e),verifyToken:()=>r.get("/auth/verify")},o={getAll:e=>{let t={};return(null==e?void 0:e.page)&&(t.page=e.page),(null==e?void 0:e.limit)&&(t.limit=e.limit),(null==e?void 0:e.status)&&(t.status=e.status),(null==e?void 0:e.search)&&(t.search=e.search),(null==e?void 0:e.category)&&(t.category=e.category),(null==e?void 0:e.purpose)&&(t.purpose=e.purpose),(null==e?void 0:e.subtype)&&(t.subtype=e.subtype),(null==e?void 0:e.minPrice)&&(t.minPrice=e.minPrice),(null==e?void 0:e.maxPrice)&&(t.maxPrice=e.maxPrice),(null==e?void 0:e.minArea)&&(t.minArea=e.minArea),(null==e?void 0:e.maxArea)&&(t.maxArea=e.maxArea),(null==e?void 0:e.bhk)&&(t.bhk=e.bhk),(null==e?void 0:e.bathrooms)&&(t.bathrooms=e.bathrooms),(null==e?void 0:e.furnishing)&&(t.furnishing=e.furnishing),(null==e?void 0:e.availableFor)&&e.availableFor.length>0&&(t.availableFor=e.availableFor),(null==e?void 0:e.availableFrom)&&(t.availableFrom=e.availableFrom),(null==e?void 0:e.constructionStatus)&&(t.constructionStatus=e.constructionStatus),(null==e?void 0:e.investmentType)&&e.investmentType.length>0&&(t.investmentType=e.investmentType),(null==e?void 0:e.powerCapacity)&&(t.powerCapacity=e.powerCapacity),(null==e?void 0:e.meetingRooms)!==void 0&&(t.meetingRooms=e.meetingRooms),(null==e?void 0:e.pantry)!==void 0&&(t.pantry=e.pantry),(null==e?void 0:e.conferenceRoom)!==void 0&&(t.conferenceRoom=e.conferenceRoom),(null==e?void 0:e.cabins)&&(t.cabins=e.cabins),(null==e?void 0:e.washrooms)&&(t.washrooms=e.washrooms),(null==e?void 0:e.floorPreference)&&(t.floorPreference=e.floorPreference),(null==e?void 0:e.locatedOn)&&(t.locatedOn=e.locatedOn),(null==e?void 0:e.officeSpread)&&(t.officeSpread=e.officeSpread),(null==e?void 0:e.situatedIn)&&(t.situatedIn=e.situatedIn),(null==e?void 0:e.businessType)&&e.businessType.length>0&&(t.businessType=e.businessType),(null==e?void 0:e.city)&&(t.city=e.city),(null==e?void 0:e.state)&&(t.state=e.state),(null==e?void 0:e.locality)&&(t.locality=e.locality),(null==e?void 0:e.amenities)&&e.amenities.length>0&&(t.amenities=e.amenities),(null==e?void 0:e.reraApproved)!==void 0&&(t.reraApproved=e.reraApproved),(null==e?void 0:e.ageOfProperty)&&(t.ageOfProperty=e.ageOfProperty),(null==e?void 0:e.possessionStatus)&&(t.possessionStatus=e.possessionStatus),(null==e?void 0:e.facing)&&(t.facing=e.facing),(null==e?void 0:e.parking)&&(t.parking=e.parking),(null==e?void 0:e.sortBy)&&(t.sortBy=e.sortBy),r.get("/properties",{params:t})},getById:e=>r.get("/properties/".concat(e)),create:e=>r.post("/properties",e),update:(e,t)=>r.put("/properties/".concat(e),t),delete:e=>r.delete("/properties/".concat(e)),search:e=>o.getAll({...e,page:e.page,limit:e.limit}),getSimilar:(e,t)=>r.get("/properties/".concat(e,"/similar"),{params:{limit:t}})},l={create:e=>r.post("/leads",e),getAll:e=>r.get("/leads",{params:e}),getById:e=>r.get("/leads/".concat(e)),updateStatus:(e,t)=>r.put("/leads/".concat(e,"/status"),{status:t}),delete:e=>r.delete("/leads/".concat(e)),exportCSV:()=>r.get("/leads/export/csv",{responseType:"blob"})},c={getAll:()=>r.get("/wishlist"),add:e=>r.post("/wishlist",{property_id:e}),remove:e=>r.delete("/wishlist/".concat(e))},u={getDashboard:()=>r.get("/admin/dashboard"),getUsers:e=>r.get("/admin/users",{params:e}),updateUserStatus:(e,t)=>r.put("/admin/users/".concat(e,"/status"),{is_active:t}),updateUserRole:(e,t)=>r.put("/admin/users/".concat(e,"/role"),{role:t}),deleteUser:e=>r.delete("/admin/users/".concat(e)),getAnalytics:e=>r.get("/admin/analytics",{params:e}),getSettings:()=>r.get("/admin/settings"),updateSettings:e=>r.put("/admin/settings",e)},d={getPublicSettings:()=>r.get("/admin/settings/public")},p={upload:e=>{let t=new FormData;t.append("file",e);let i=e.type.startsWith("video/");return r.post("/media/upload",t,{headers:{"Content-Type":"multipart/form-data"},timeout:i?6e5:3e4,onUploadProgress:e=>{e.total&&(e.loaded,e.total)}})},uploadMultiple:e=>{let t=new FormData;e.forEach(e=>t.append("files",e));let i=e.some(e=>e.type.startsWith("video/"));return r.post("/media/upload/multiple",t,{headers:{"Content-Type":"multipart/form-data"},timeout:i?6e5:3e4})}},m={search:e=>r.get("/locations",{params:{query:e}})},h={getAll:()=>r.get("/drafts"),create:e=>r.post("/drafts",e),update:(e,t)=>r.put("/drafts/".concat(e),t),delete:e=>r.delete("/drafts/".concat(e))},f={getAll:()=>r.get("/amenities"),create:e=>r.post("/amenities",e),update:(e,t)=>r.put("/amenities/".concat(e),t),delete:e=>r.delete("/amenities/".concat(e))}},93448:function(e,t,i){function n(e){return null==e||isNaN(e)?"â‚¹0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}function a(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.filter(Boolean).join(" ")}function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||"string"!=typeof e)return e||"/placeholder-property.jpg";if(!e.includes("ik.imagekit.io"))return e;let{width:i,height:n,quality:a="auto",format:r="auto"}=t,s=[];if(i&&s.push("w-".concat(i)),n&&s.push("h-".concat(n)),a&&s.push("q-".concat(a)),r&&s.push("f-".concat(r)),0===s.length)return"".concat(e,"?tr=f-auto,q-auto");let o=e.includes("?")?"&":"?";return"".concat(e).concat(o,"tr=").concat(s.join(","))}function s(e){return r(e,{width:600,quality:"auto",format:"auto"})}function o(e){return r(e,{width:1200,quality:"auto",format:"auto"})}i.d(t,{Km:function(){return s},cn:function(){return a},kC:function(){return o},w1:function(){return r},xG:function(){return n}})},1217:function(e,t,i){i.d(t,{t:function(){return r}});var n=i(59625),a=i(89134);let r=(0,n.Ue)()((0,a.tJ)(e=>({user:null,token:null,isAuthenticated:!1,setAuth:(t,i)=>{localStorage.setItem("token",i),e({user:t,token:i,isAuthenticated:!0})},clearAuth:()=>{localStorage.removeItem("token"),e({user:null,token:null,isAuthenticated:!1})},updateUser:t=>e(e=>({user:e.user?{...e.user,...t}:null}))}),{name:"auth-storage",partialize:e=>({user:e.user,token:e.token,isAuthenticated:e.isAuthenticated})}))}}]);